function serviceFunc(e,t,n,a,o,i,r){function s(e){var a=function(n){if(t.debug("[notification.fct.js] Push received:",n),void 0!==e.config&&e.config.length>0){var a=i.get("ActionFactory");e.config.forEach(function(e){if("push-event"==e["item-type"]){var t={$notification:n},o=!0;e.operations.length>0&&(o=a.evalOperations(e.operations,t)),o===!0&&a.triggerEvent("push-received",e.actions,t)}})}};if(void 0!==window.device&&void 0!==window.device.platform&&void 0!==e&&void 0!==e.settings&&void 0!==e.settings["push-notifications"]){var o=e.settings["push-notifications"],s=null;switch(device.platform.toLowerCase()){case"android":void 0!==o.android&&o.android.enabled===!0&&(s={senderID:o.android.id});break;case"Win32NT":void 0!==o.wp&&o.wp.enabled===!0&&(s={channelName:o.wp.channelName});break;case"ios":void 0!==o.ios&&o.ios.enabled===!0&&(s={badge:"true",sound:"true",alert:"true"})}if(null!==s){var l=r.getSource("notification");l!==!1&&(t.debug("Registering for push notifications..."),l.registerForPush(function(e){t.debug("Registered for push:",e),n.set("data__.notification.token",e),l.on("pushReceived",a)},function(e){t.error("Error registering for push:",e)},s))}}}function l(){return r.getSource("notification")!==!1}function c(e){for(var t=5381,n=0;n<e.length;n++){var a=e.charCodeAt(n);t=(t<<5)+t+a}return t}function d(){var e=r.getSource("notification");m===!1&&l()&&(e.on("interactedWith",function(e){var t=o.getSchemaConfigItemsByItemType("device-notification");if(t.length>0){var n=i.get("ActionFactory");angular.forEach(t,function(t){if(void 0!==t.name&&c(t.name)==e.id&&void 0!==t.actions&&t.actions.length>0)if(void 0===e.actionResponseIdentifier)n.triggerEvent("click",t.actions,{$notification:e});else{var a=e.actionResponseIdentifier+"-interaction-pressed";n.triggerEvent(a,t.actions,{$notification:e})}})}}),m=!0)}function u(s){var u=e.defer();if(void 0!==s.name){var p=o.getSchemaConfigItemByName(s.name);if(void 0!==p)if("device-notification"==p["item-type"])if(l()){var m=r.getSource("notification"),f=s.title||p.title;void 0!==f&&f.indexOf("{{")>-1&&(f=n.parse(f));var g=s.text||p.text;void 0!==g&&g.indexOf("{{")>-1&&(g=n.parse(g));var v=s.name+"_category",h={id:c(s.name),title:f,text:g};if(void 0!==p.interactions&&p.interactions.length>0&&(h.category={identifier:v,actions:[]},p.interactions.forEach(function(e){var t={title:e.label,identifier:e.name,textInput:e.text===!0};h.category.actions.push(t)})),s.options.schedule===!0)if(s.options.dynamic===!0&&void 0!==s.options.model){var y=n.parse(s.options.model);try{var b=new Date(y)}catch($){t.error("Invalid date provided:",$)}}else{if(void 0!==s.options.date)try{var b=new Date(s.options.date)}catch($){t.error("Invalid date provided:",$)}else var b=new Date;if(void 0!==b&&void 0!==s.options.time){try{var w=new Date(s.options.time)}catch($){t.error("Invalid date provided:",$)}b.setHours(w.getHours()),b.setSeconds(w.getSeconds()),b.setMinutes(w.getMinutes())}}void 0!==b&&(h.at=b),m.schedule(h),d(),u.resolve()}else{var S="Native notifications are not available on this platform.";t.info(S),u.reject(S)}else{var k=null;switch(p.style){case"success":case"error":case"warning":k=p.style;break;case"info":default:k="info"}if(null!==k){var f=s.title||p.title;void 0!==f&&f.indexOf("{{")>-1&&(f=n.parse(f));var A=s.text||p.text;if(void 0!==A&&A.indexOf("{{")>-1&&(A=n.parse(A)),void 0!==p.actions&&p.actions.length>0){var E=i.get("ActionFactory");p.options.onHidden=function(e){e===!0&&E.triggerEvent("click",p.actions)}}a[k](A,f,p.options),u.resolve()}}else u.reject("Notification with name '"+s.name+"' could not be found in app config.")}else u.reject("Notification name has not been specified.");return u.promise}var p={call:u,init:s},m=!1;return p}!function(){"use strict";function e(){return++c}function t(e){return e&&e.window===e}function n(e){return"string"==typeof e}function a(e){if(null==e||t(e))return!1;var a=e.length;return 1===e.nodeType&&a?!0:n(e)||Array.isArray(e)||0===a||"number"==typeof a&&a>0&&a-1 in e}function o(){return Object.create(null)}function i(t,n){var a,o=typeof t;return"function"==o||"object"==o&&null!==t?"function"==typeof(a=t.$$hashKey)?a=t.$$hashKey():void 0===a&&(a=t.$$hashKey=(n||e)()):a=t,o+":"+a}function r(e,t,n){var a,o,i=[],r=[];for(a=0;a<t.length;a++)for(o=0;o<e.length;o++)e[o][n]?e[o][n]===t[a]&&r.push(e[o]):i.push(e[o]);return r=r.concat(i)}function s(e){var t=e[0],n=e[e.length-1],a=[t];do{if(t=t.nextSibling,!t)break;a.push(t)}while(t!==n);return angular.element(a)}function l(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}var c=0,d=function(e){return e.clone[0]},u=function(e){return e.clone[e.clone.length-1]},p=function(e,t,n,a,o,i,r,s){e[n]=a,o&&(e[o]=i),e.$index=t,e.$first=0===t,e.$last=t===r-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0===(1&t)),s&&(e.$group=s)},m=function(e,t){e.data("isolateScope",t)},f=function(e,t){var n,a=e.length;if(0===a)return!1;for(n=0;a>n;n++)if(S(t,e[n]))return!0;return!1},g=function(e,t){var n,a=e.length;if(0===a)return-1;for(n=0;a>n;n++)if(S(t,e[n]))return n;return-1},v=function(e,t,n){var a,o=e,i=typeof n;if(e==t)return null;do if("string"===i){if(a=" "+o.className+" ",1===o.nodeType&&a.replace(/[\t\r\n\f]/g," ").indexOf(n)>=0)return o}else if(o==n)return o;while((o=o.parentNode)&&o!=t&&9!==o.nodeType);return null},h=function(e){var t,n=e.className.replace(/[\t\r\n\f]/g," ").trim();t=n.split(" ");for(var a=0;a<t.length;a++)/\s+/.test(t[a])&&(t.splice(a,1),a--);return t},y=function(e,t){var n=h(e);return-1!==n.indexOf(t)},b=function(e,t){var n,a,o,i=e.children(),r=i.length;if(r>0)for(var s=0;r>s;s++){if(n=i.eq(s),a=!0,o=h(n[0]),o.length>0)for(var l=0;l<t.length;l++)if(-1===o.indexOf(t[l])){a=!1;break}if(a)return n}return[]},$=function(e,t){var n,a,o;if(-1!==e.text().toLowerCase().indexOf(t.toLowerCase()))return!0;for(n=e.children(),o=n.length,a=0;o>a;a++)if(-1!==n.eq(a).text().toLowerCase().indexOf(t.toLowerCase()))return!0;return!1},w=angular.element,S=angular.equals,k=angular.copy,A=angular.extend,E=angular.module("nya.bootstrap.select",[]);E.provider("nyaBsConfig",function(){var e=null,t={"en-us":{defaultNoneSelection:"Nothing selected",noSearchResult:"NO SEARCH RESULT",numberItemSelected:"%d item selected",selectAll:"Select All",deselectAll:"Deselect All"}},n=k(t);this.setLocalizedText=function(e,t){if(!e)throw new Error("localeId must be a string formatted as languageId-countryId");n[e]||(n[e]={}),n[e]=A(n[e],t)},this.useLocale=function(t){e=t},this.$get=["$locale",function(a){var o;return o=e?n[e]:n[a.id],o||(o=t["en-us"]),o}]}),E.controller("nyaBsSelectCtrl",function(){var e=this;e.keyIdentifier=null,e.valueIdentifier=null,e.isMultiple=!1,e.onCollectionChange=function(){},e.setId=function(t){e.id=t||"id#"+Math.floor(1e4*Math.random())}}),E.directive("nyaBsSelect",["$parse","$document","$timeout","nyaBsConfig",function(e,t,n,a){var o="Nothing selected",i='<button class="btn btn-default dropdown-toggle" type="button"><span class="pull-left filter-option"></span>&nbsp;<span class="caret"></span></button>',r='<div class="dropdown-menu open"></div>',s='<div class="bs-searchbox"><input type="text" class="form-control"></div>',c='<ul class="dropdown-menu inner"></ul>',d='<li class="no-search-result"><span>NO SEARCH RESULT</span></li>',u='<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button class="actions-btn bs-select-all btn btn-default">SELECT ALL</button><button class="actions-btn bs-deselect-all btn btn-default">DESELECT ALL</button></div></div>';return{restrict:"ECA",require:["ngModel","nyaBsSelect"],controller:"nyaBsSelectCtrl",compile:function(p,m){p.addClass("btn-group");var A,E,x,C,T,I,D,_,F=function(){var e;return e=m.titleTpl?w(m.titleTpl):m.title?document.createTextNode(m.title):R.defaultNoneSelectionTpl?w(R.defaultNoneSelectionTpl):R.defaultNoneSelection?document.createTextNode(R.defaultNoneSelection):document.createTextNode(o)},P=p.children(),N=w(i),M=w(r),q=w(c),R=a,L="undefined"!=typeof m.multiple;for(C=h(p[0]),C.forEach(function(e){/btn-(?:primary|info|success|warning|danger|inverse)/.test(e)&&(p.removeClass(e),N.removeClass("btn-default"),N.addClass(e)),/btn-(?:lg|sm|xs)/.test(e)&&(p.removeClass(e),N.addClass(e)),"form-control"===e&&N.addClass(e)}),q.append(P),T=P.length,I=0;T>I;I++)D=P.eq(I),(D.hasClass("nya-bs-option")||D.attr("nya-bs-option"))&&(D.find("a").attr("tabindex","0"),_=D.attr("value"),angular.isString(_)&&""!==_&&(D.attr("data-value",_),D.removeAttr("value")));return"true"===m.liveSearch&&(A=w(s),R.noSearchResultTpl?d=d.replace("NO SEARCH RESULT",R.noSearchResultTpl):R.noSearchResult&&(d=d.replace("NO SEARCH RESULT",R.noSearchResult)),E=w(d),M.append(A),q.append(E)),"true"===m.actionsBox&&L&&(R.selectAllTpl?u=u.replace("SELECT ALL",R.selectAllTpl):R.selectAll&&(u=u.replace("SELECT ALL",R.selectAll)),R.deselectAllTpl?u=u.replace("DESELECT ALL",R.deselectAllTpl):R.selectAll&&(u=u.replace("DESELECT ALL",R.deselectAll)),x=w(u),M.append(x)),N.children().eq(0).append(F()),M.append(q),p.append(N),p.append(M),function(a,o,i,r){function s(){var e,t,n=U.children(),a=n.length;for(e=0;a>e;e++)if(t=n.eq(e),t.hasClass("active")&&t.hasClass("nya-bs-option")&&!t.hasClass("not-match"))return t;return null}function c(e){for(var t,n=e.childNodes,a=n.length,o=0;a>o;o++)if(t=n[o],1===t.nodeType&&"a"===t.tagName.toLowerCase()){t.focus();break}}function d(e){var t;t=e?U.children().eq(0):U.children().eq(U.children().length-1);for(var n=0;n<U.children().length;n++){var a=U.children().eq(n);if(!a.hasClass("not-match")&&a.hasClass("selected"))return U.children().eq(n)[0]}return!t.hasClass("nya-bs-option")||t.hasClass("disabled")||t.hasClass("not-match")?e?u(t[0],"nextSibling"):u(t[0],"previousSibling"):t[0]}function u(e,t){if(!e||y(e,"nya-bs-option")){for(var n=e;(n=l(n,t))&&n.nodeType;)if(y(n,"nya-bs-option")&&!y(n,"disabled")&&!y(n,"not-match"))return n;return null}}function p(e){if(M&&!P){var t,n,o;if(t=U.find("li"),t.length>0){n=D.$modelValue,o=Array.isArray(n)?k(n):[];for(var i=0;i<t.length;i++){var r=w(t[i]);if(!r.hasClass("disabled")){var s,l;s=h(r),"undefined"!=typeof s&&(l=g(o,s),e&&-1==l?(o.push(s),r.addClass("selected")):e||-1==l||(o.splice(l,1),r.removeClass("selected")))}}D.$setViewValue(o),a.$digest(),E()}}}function m(e){var t,n,i,r=D.$modelValue;t=h(e),"undefined"!=typeof t&&(M?(n=Array.isArray(r)?k(r):[],i=g(n,t),-1===i?(n.push(t),e.addClass("selected")):(n.splice(i,1),e.removeClass("selected"))):(U.children().removeClass("selected"),n=t,e.addClass("selected"))),D.$setViewValue(n),a.$digest(),M||(o.hasClass("open")&&o.triggerHandler("blur"),o.removeClass("open")),E()}function h(e){var t;return I?(t=e.data("isolateScope"),I(t)):_.valueIdentifier||_.keyIdentifier?(t=e.data("isolateScope"),t[_.valueIdentifier]||t[_.keyIdentifier]):e.attr("data-value")}function A(e){var t=e.find("a");return 0===t.children().length||t.children().eq(0).hasClass("check-mark")?t[0].firstChild.cloneNode(!1):t.children().eq(0)[0].cloneNode(!0)}function E(){var e=D.$modelValue;o.triggerHandler("change");var t=q.children().eq(0);return"undefined"==typeof e?(t.empty(),void t.append(F())):void(M&&0===e.length?(t.empty(),t.append(F())):n(function(){var n,a,o,r,s,l,c=U.children(),d=c.length,u=[];if(M&&"count"===i.selectedTextFormat?l=1:M&&i.selectedTextFormat&&(s=i.selectedTextFormat.match(/\s*count\s*>\s*(\d+)\s*/))&&(l=parseInt(s[1],10)),"undefined"!=typeof l&&e.length>l)return t.empty(),void(R.numberItemSelectedTpl?t.append(w(R.numberItemSelectedTpl.replace("%d",e.length))):R.numberItemSelected?t.append(document.createTextNode(R.numberItemSelected.replace("%d",e.length))):t.append(document.createTextNode(e.length+" items selected")));for(o=0;d>o;o++)a=c.eq(o),a.hasClass("nya-bs-option")&&(n=h(a),M?Array.isArray(e)&&f(e,n)&&(r=a.attr("title"),r?u.push(document.createTextNode(r)):u.push(A(a))):S(e,n)&&(r=a.attr("title"),r?u.push(document.createTextNode(r)):u.push(A(a))));if(0===u.length)t.empty(),t.append(F());else if(1===u.length)t.empty(),t.append(u[0]);else for(t.empty(),o=0;o<u.length;o++)t.append(u[o]),o<u.length-1&&t.append(document.createTextNode(", "))}))}function x(){var e,t,n=U.find("li"),a=n.length;for(t=0;a>t;t++)if(e=n.eq(t),e.hasClass("nya-bs-option")||e.attr("nya-bs-option")){C=e[0].clientHeight;break}if(/\d+/.test(i.size)){var o=parseInt(i.size,10);U.css("max-height",o*C+"px"),U.css("overflow-y","auto")}}var C,T,I,D=r[0],_=r[1],P=!1,N=e(_.valueExp),M="undefined"!=typeof i.multiple,q=b(o,["dropdown-toggle"]),L=q.next(),U=b(L,["dropdown-menu","inner"]),O=b(L,["bs-searchbox"]),j=b(U,["no-search-result"]),V=b(L,["bs-actionsbox"]);_.valueExp&&(I=function(e,t){return N(e,t)}),_.setId(o.attr("id")),M&&(_.isMultiple=!0,D.$isEmpty=function(e){return!e||0===e.length}),"undefined"!=typeof i.disabled&&a.$watch(i.disabled,function(e){e?(q.addClass("disabled"),T=q.attr("tabindex"),q.attr("tabindex","-1"),P=!0):(q.removeClass("disabled"),T?q.attr("tabindex",T):q.removeAttr("tabindex"),P=!1)}),_.onCollectionChange=function(e){var t,n,o=[],i=D.$modelValue;if(i){if(Array.isArray(e)&&e.length>0){if(I)for(t=0;t<e.length;t++)o.push(I(a,e[t]));else for(t=0;t<e.length;t++)_.valueIdentifier?o.push(e[t][_.valueIdentifier]):_.keyIdentifier&&o.push(e[t][_.keyIdentifier]);if(M){for(n=i.length,t=0;t<i.length;t++)f(o,i[t])||(i.splice(t,1),t--);n!==i.length&&(i=k(i))}else f(o,i)||(i=o[0])}D.$setViewValue(i),E()}},U.on("click",function(e){if(!P&&!w(e.target).hasClass("dropdown-header")){var t,n=v(e.target,U[0],"nya-bs-option");if(null!==n){if(t=w(n),t.hasClass("disabled"))return;m(t)}}});var B=function(e){null===v(e.target,o.parent()[0],o[0])&&(o.hasClass("open")&&o.triggerHandler("blur"),o.removeClass("open"))};t.on("click",B),q.on("blur",function(){o.hasClass("open")||o.triggerHandler("blur")}),q.on("click",function(){var e;o.toggleClass("open"),o.hasClass("open")&&"undefined"==typeof C&&x(),"true"===i.liveSearch&&o.hasClass("open")?(e=d(!0),e&&(U.children().removeClass("active"),w(e).addClass("active"))):o.hasClass("open")&&(e=d(!0),e&&c(e))}),"true"===i.actionsBox&&M&&(V.find("button").eq(0).on("click",function(){p(!0)}),V.find("button").eq(1).on("click",function(){p(!1)})),"true"===i.liveSearch&&O.children().on("input",function(){var e,t,n,a=O.children().val(),o=0,i=U.children(),r=i.length;if(a){for(e=0;r>e;e++)t=i.eq(e),t.hasClass("nya-bs-option")&&($(t.find("a"),a)?(t.removeClass("not-match"),o++):t.addClass("not-match"));0===o?j.addClass("show"):j.removeClass("show")}else{for(e=0;r>e;e++)t=i.eq(e),t.hasClass("nya-bs-option")&&t.removeClass("not-match");j.removeClass("show")}n=d(!0),n&&(i.removeClass("active"),w(n).addClass("active"))}),D.$render=function(){var e,t,n=D.$modelValue,a=U.children(),o=a.length;if("undefined"==typeof n)for(e=0;o>e;e++)a.eq(e).hasClass("nya-bs-option")&&a.eq(e).removeClass("selected");else for(e=0;o>e;e++)a.eq(e).hasClass("nya-bs-option")&&(t=h(a.eq(e)),M?f(n,t)?a.eq(e).addClass("selected"):a.eq(e).removeClass("selected"):S(n,t)?a.eq(e).addClass("selected"):a.eq(e).removeClass("selected"));E()},o.on("keydown",function(e){var t=e.keyCode;if(27===t||13===t||38===t||40===t){if(e.preventDefault(),P)return void e.stopPropagation();var n,a,r,l,p=v(e.target,o[0],q[0]);"true"===i.liveSearch?a=v(e.target,o[0],O[0]):n=v(e.target,o[0],L[0]),p?13!==t&&38!==t&&40!==t||o.hasClass("open")||(e.stopPropagation(),o.addClass("open"),"undefined"==typeof C&&x(),"true"===i.liveSearch?(O.children().eq(0)[0].focus(),l=d(!0),l&&(U.children().removeClass("active"),w(l).addClass("active"))):(l=d(!0),l&&c(l))):n?27===t?(q[0].focus(),o.hasClass("open")&&o.triggerHandler("blur"),o.removeClass("open"),e.stopPropagation()):38===t?(e.stopPropagation(),l=u(e.target.parentNode,"previousSibling"),l?c(l):(l=d(!1),l&&c(l))):40===t?(e.stopPropagation(),l=u(e.target.parentNode,"nextSibling"),l?c(l):(l=d(!0),l&&c(l))):13===t&&(e.stopPropagation(),r=w(e.target.parentNode),r.hasClass("nya-bs-option")&&(m(r),M||q[0].focus())):a&&(27===t?(q[0].focus(),o.removeClass("open"),e.stopPropagation()):38===t?(e.stopPropagation(),r=s(),r&&(l=u(r[0],"previousSibling"),l?(r.removeClass("active"),w(l).addClass("active")):(l=d(!1),l&&(r.removeClass("active"),w(l).addClass("active"))))):40===t?(e.stopPropagation(),r=s(),r&&(l=u(r[0],"nextSibling"),l?(r.removeClass("active"),w(l).addClass("active")):(l=d(!0),l&&(r.removeClass("active"),w(l).addClass("active"))))):13===t&&(r=s(),r&&(m(r),M||q[0].focus())))}}),a.$on("$destroy",function(){U.off(),q.off(),O.off(),t.off("click",B)})}}}}]),E.directive("nyaBsOption",["$parse",function(e){var t=/^\s*(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/;return{restrict:"A",transclude:"element",priority:1e3,terminal:!0,require:["^nyaBsSelect","^ngModel"],compile:function(n,l){var c=l.nyaBsOption,g=document.createComment(" end nyaBsOption: "+c+" "),v=c.match(t);if(!v)throw new Error("invalid expression");var h,y,b,$,k,A=l.value,E=A?e(A):null,x=v[3]||v[1],C=v[2],T=v[4],I=v[5]?e(v[5]):null,D=v[6],_={$id:i},F={};return D?$=e(D):(h=function(e,t){return i(t)},y=function(e){return e}),function(e,t,n,i,l){function c(e){var n,i,c,$,A,E,T,I,_,F,N,q,R,L,U,O=t[0],j=o(),V=[];if(k&&(q=[]),a(e))E=e,A=b||h;else{A=b||y,E=[];for(var B in e)e.hasOwnProperty(B)&&"$"!=B.charAt(0)&&E.push(B);E.sort()}for(T=E.length,I=new Array(T),n=0;T>n;n++)if(i=e===E?n:E[n],c=e[i],$=A(i,c,n),U={},C&&(U[C]=i),U[x]=c,V.push(U),k&&(F=k(i,c),-1===q.indexOf(F)&&F&&q.push(F)),M[$])_=M[$],delete M[$],k&&(_.group=F),_.key=i,_.value=c,j[$]=_,I[n]=_;else{if(j[$])throw I.forEach(function(e){e&&e.scope&&(M[e.id]=e)}),new Error("Duplicates in a select are not allowed. Use 'track by' expression to specify unique keys.");I[n]={id:$,scope:void 0,clone:void 0,key:i,value:c},j[$]=!0,F&&(I[n].group=F)}q&&q.length>0&&(I=r(I,q,"group"));for(var G in M)_=M[G],L=s(_.clone),L.removeData("isolateScope"),L.remove(),_.scope.$destroy();for(n=0;T>n;n++)_=I[n],_.scope?(N=O,d(_)!=N&&w(O).after(_.clone),O=u(_),p(_.scope,n,x,_.value,C,_.key,T,_.group)):l(function(e,t){m(e,t),_.scope=t;var a=g.cloneNode(!1);e[e.length++]=a,w(O).after(e),e.addClass("nya-bs-option"),c=v?v(_.key,_.value):_.value||_.key,D.isMultiple?Array.isArray(P.$modelValue)&&f(P.$modelValue,c)&&e.addClass("selected"):S(c,P.$modelValue)&&e.addClass("selected"),O=a,_.clone=e,j[_.id]=_,p(_.scope,n,x,_.value,C,_.key,T,_.group)}),q&&void 0!=q&&q.length>0&&(R&&R===_.group?_.clone.removeClass("first-in-group"):_.clone.addClass("first-in-group"),R=_.group,_.clone.addClass("group-item"));M=j,D.onCollectionChange(V)}var v,D=i[0],P=i[1],N={};$&&(b=function(t,n,a){return C&&(_[C]=t),_[x]=n,_.$index=a,$(e,_)}),I&&(k=function(t,n){return C&&(F[C]=t),F[x]=n,I(e,F)}),C&&(D.keyIdentifier=C),x&&(D.valueIdentifier=x),E&&(D.valueExp=A,v=function(t,n){return C&&(N[C]=t),N[x]=n,E(e,N)});var M=o();"true"===n.deepWatch?e.$watch(T,c,!0):e.$watchCollection(T,c)}}}}])}(),angular.module("angular-datepicker",[]).directive("pickADate",["$timeout",function(e){return{restrict:"A",scope:{pickADate:"=",pickADateOptions:"="},link:function(e,t,n){function a(n){if("function"==typeof s&&s.apply(this,arguments),!e.$$phase&&!e.$root.$$phase){var a=t.pickadate("picker").get("select");a&&e.$apply(function(){return n.hasOwnProperty("clear")?void(e.pickADate=null):(e.pickADate&&"string"!=typeof e.pickADate||(e.pickADate=new Date(0)),e.pickADate.setYear(a.obj.getFullYear()),e.pickADate.setMonth(a.obj.getMonth()),void e.pickADate.setDate(a.obj.getDate()))})}}function o(e){}function i(e){if("function"==typeof l&&l.apply(this,arguments),"undefined"!=typeof cordova&&cordova.plugins&&cordova.plugins.Keyboard){var t=function(){cordova.plugins.Keyboard.close(),window.removeEventListener("native.keyboardshow",this)};window.addEventListener("native.keyboardshow",t),setTimeout(function(){window.removeEventListener("native.keyboardshow",t)},500)}}var r=e.pickADateOptions||{},s=r.onSet,l=(r.onOpen,r.onClose);void 0!=r.min&&""!=r.min&&null!=r.min&&"string"==typeof r.min?"current"==r.min?r.min=new Date:r.min=new Date(Date.parse(r.min)):null==r.min&&(r.min=""),void 0!=r.max&&""!=r.max&&null!=r.max&&"string"==typeof r.max?"current"==r.max?r.max=new Date:r.max=new Date(Date.parse(r.max)):null==r.max&&(r.max=""),void 0!=r["default"]&&""!=r["default"]&&null!=r["default"]&&"string"==typeof r["default"]?"current"==r["default"]?e.pickADate=new Date:e.pickADate=new Date(Date.parse(r["default"])):null==r["default"]&&(r["default"]=""),void 0!=r.selectYears&&r.selectYears===!0&&(r.selectYears=200),t.pickadate(angular.extend(r,{onOpen:o,onSet:a,onClose:i,container:document.body})),e.$watch("pickADate",function(n,a){n!=a&&("string"==typeof e.pickADate&&(e.pickADate=new Date(Date.parse(e.pickADate))),t.pickadate("picker").set("select",e.pickADate),e.$parent.updateStore(e.pickADate))})}}}]).directive("pickATime",function(){return{restrict:"A",scope:{pickATime:"=",pickATimeOptions:"="},link:function(e,t,n){function a(n){if("function"==typeof r&&r.apply(this,arguments),!e.$$phase&&!e.$root.$$phase){var a=t.pickatime("picker").get("select");a&&e.$apply(function(){return n.hasOwnProperty("clear")?void(e.pickATime=null):(e.pickATime&&"string"!=typeof e.pickATime||(e.pickATime=new Date),e.pickATime.setHours(a.hour),e.pickATime.setMinutes(a.mins),e.pickATime.setSeconds(0),void e.pickATime.setMilliseconds(0))})}}function o(e){if("function"==typeof s&&s.apply(this,arguments),"undefined"!=typeof cordova&&cordova.plugins&&cordova.plugins.Keyboard){var t=function(){cordova.plugins.Keyboard.close(),window.removeEventListener("native.keyboardshow",this)};window.addEventListener("native.keyboardshow",t),setTimeout(function(){window.removeEventListener("native.keyboardshow",t)},500)}}var i=e.pickATimeOptions||{},r=i.onSet,s=i.onClose;void 0!=i.min&&""!=i.min&&"string"==typeof i.min&&("current"==i.min?i.min=new Date:i.min=new Date(Date.parse(i.min))),void 0!=i.max&&""!=i.max&&"string"==typeof i.max&&("current"==i.max?i.max=new Date:i.max=new Date(Date.parse(i.max))),void 0!=i["default"]&&""!=i["default"]&&"string"==typeof i["default"]&&("current"==i["default"]?e.pickATime=new Date:e.pickATime=new Date(Date.parse(i["default"]))),t.pickatime(angular.extend(i,{onSet:a,onClose:o,container:document.body})),e.$watch("pickATime",function(n,a){n!=a&&("string"==typeof e.pickATime&&(e.pickATime=new Date(Date.parse(e.pickATime))),t.pickatime("picker").set("select",e.pickATime),e.$parent.updateStore(e.pickATime))})}}});var mdm={};angular.module("app",["app.core","app.templates"]),angular.module("mdesign",[]),angular.module("app.core",["mdesign","ngSanitize","ngAnimate","ngRoute","ngTouch","LocalStorageModule","vr.directives.slider","pascalprecht.translate","tmh.dynamicLocale","angularLoad","angles","toastr","base64","ngMessages","angular-datepicker","nya.bootstrap.select","mobile-router","ngElectron"]).config(["localStorageServiceProvider","$translateProvider","tmhDynamicLocaleProvider","$compileProvider","$logProvider",function(e,t,n,a,o){o.debugEnabled(!1),e.setPrefix(""),t.useLoader("TranslationService"),t.preferredLanguage("off"),a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|content|file|ms-appx|cdvfile):/),angular.module("mdesign").directive=a.directive}]).run(["Router","RouterConfig","SchemaHelper","SchemaService","StoreFactory","StoreProvider","Auth","$http",function(e,t,n,a,o,i,r,s){function l(e,t){try{for(var n=e.split(/\?(.+)?/)[1].split("&"),a=0;a<n.length;a++){var o=n[a];if(o.indexOf(t+"=")>-1){var i=o.split(/=(.+)?/);return i[1]}}}catch(r){return}}function c(e){for(var t={},n=e.split(","),a=0;a<n.length;a++){var o=n[a],i=o.split(/=(.+)?/),r=i[0].split("."),s=i[1];s=d(s),p(t,r,0,s)}return t}function d(e){return u(e)&&(e=parseInt(e)),e}function u(e){return!isNaN(parseFloat(e))&&isFinite(e)}function p(e,t,n,a){n<t.length-1?(e=null==e[t[n]]?e[t[n]]={}:e[t[n]],p(e,t,n+1,a)):e[t[n]]=a}window.handleOpenURL=function(n){setTimeout(function(){var a=l(n,"initial_data"),r=l(n,"page");null!=a&&(a=decodeURIComponent(a));var s=null;if(null!=a&&(s=c(a)),null!=r){r=decodeURIComponent(r);var d=e.getCurrent();void 0!==d?(null!=s&&o.mergeInitialData(s),e.go("/"+r)):(null!=s&&i.set("initialData",s),t.set("startPage","/"+r))}},0)},document.addEventListener("resume",function(){var t=e.getCurrent();(void 0!==n.schema.settings&&n.schema.settings.auth===!0||void 0!==t&&t.auth===!0)&&r.authenticate("Please re-authenticate").then(function(){})["catch"](function(){e.go("/error")})},!1)}]),angular.module("app.routes",[]).config(["$routeProvider",function(e){e.when("/error",{templateUrl:"components/error/error.tpl.html"}).otherwise({redirectTo:"/"})}]),angular.module("app.core").directive("mdApp",["$compile","$q","$http","SchemaService","$rootScope","$route","localStorageService","Router","$timeout","$log","Plugin",function(e,t,n,a,o,i,r,s,l,c,d){return{scope:{mdApp:"@",debug:"@",json:"="},restrict:"A",compile:function(){return{pre:function(t,n){function o(){s.init(),n.html("<div mobile-view></div>"),e(n.contents())(t),document.getElementById("splash-screen").style.display="none",window.document.querySelectorAll("body div.view-frame")[0].style.display="block"}function i(){mdm.store.data__.preferences={};var e=d.getSource("preferences");e===!1?o():e.getAllPreferences(function(e){mdm.store.data__.preferences=e,o()},function(e){c.error("preferences errored from getAll",e),o()})}var u=!1,p=/iPhone|iPad|iPod|IEMobile|Android/i.test(navigator.userAgent),m=function(){a.initApp(t.mdApp).then(i)};if(void 0!==t.mdApp&&t.mdApp.length>0)p===!0?(document.addEventListener("deviceready",function(){m(),u=!0}),l(function(){u===!1&&m()},5e3)):m();else{var f=r.get("appName"),g=r.get(f);if("object"!=typeof g&&(g=angular.fromJson(g)),null!==g){var v=function(){a.buildDom(g).then(i)};p===!0?(document.addEventListener("deviceready",function(){v(),u=!0}),l(function(){u===!1&&v()},5e3)):v()}else alert("NO APP SCHEMA SET IN LOCAL STORAGE - CANNOT CONTINUE!")}}}}}}]),angular.module("app.core").controller("PageController",["$scope",function(e){var t=this;t.name=e.$parent.route.id,t.meta={valid:!1}}]),angular.module("app.core").directive("pageInfo",function(){return{restrict:"A",scope:!1,controller:["$scope",function(e){return{name:e.$parent.route.id}}]}}),angular.module("app.core").directive("mdForm",function(){return{restrict:"A",require:"^form",link:function(e,t,n,a){e.$watch(function(){return a.$valid},function(t){e.$parent.page.meta.valid=t})}}}),angular.module("app.core").directive("isolateForm",[function(){return{restrict:"A",require:"?form",link:function(e,t,n,a){if(a){var o={};angular.copy(a,o);var i=t.parent().controller("form");i.$removeControl(a);var r={$setValidity:function(e,t,n){o.$setValidity(e,t,n),i.$setValidity(e,!0,a)},$setDirty:function(){t.removeClass("ng-pristine").addClass("ng-dirty"),a.$dirty=!0,a.$pristine=!1}};angular.extend(a,r)}}}}]),angular.module("app.core").directive("mdContent",["markdownConverter","$compile","StoreFactory","$timeout","$rootScope","$sce",function(e,t,n,a,o,i){return{restrict:"E",scope:{name:"@",itemType:"@",content:"@",show:"@",expressions:"="},transclude:!0,link:function(o,i,r,s,l){o.show=void 0==o.show?!0:o.show;var c=l();c="markdown"==o.itemType?e.makeHtml(c.text()):c[0].outerHTML,i.append(angular.element('<div ng-if="show" class="content-block"></div>').html(c)),t(i.contents())(o),o.evalExpressions=function(){angular.forEach(o.expressions,function(e,t){o[t]=n.evaluate(e)})},a(function(){o.evalExpressions()}),o.$on("StoreChanged",function(){o.evalExpressions()})}}}]).provider("markdownConverter",function(){var e={};return{config:function(t){e=t},$get:function(){return new Showdown.converter(e)}}}),angular.module("app.core").directive("starRating",function(){return{restrict:"A",template:"<ul class='rating'>  <li ng-repeat='star in stars' ng-class='star' ng-click='toggle($index)'>    <i class='fa fa-star'></i>  </li></ul>",scope:{ratingValue:"=",max:"=",onRatingSelected:"&"},link:function(e,t,n){var a=function(){e.stars=[];for(var t=0;t<e.max;t++)e.stars.push({filled:t<e.ratingValue})};e.toggle=function(t){e.ratingValue=t+1,e.onRatingSelected({rating:t+1})},e.$watch("ratingValue",function(e,t){a()})}}}),angular.module("app.core").directive("takePhoto",["$log","StoreFactory","Camera",function(e,t,n){return{restrict:"E",require:"ngModel",scope:{imageUrl:"=",source:"@",quality:"="},template:'<div class="photo-control-container"><button class="btn btn-lg btn-primary"><span ng-if="sourceIndex == 1"><span class="fa fa-camera"></span> Take</span> <span ng-if="sourceIndex == 2"><span class="fa fa-picture-o"></span> Choose</span> Photo</button></div>',link:function(e,t){switch(e.imageData=null,e.quality=void 0===e.quality?75:e.quality,e.source){case"gallery":e.sourceIndex=2;break;case"camera":default:e.sourceIndex=1}e.destination=1,e.encodingType=1,t.find("button").on("click",function(){2===e.source?n.selectPhoto().then(function(t){e.loadThumbnail(t)}):n.takePhoto(e.quality).then(function(t){e.loadThumbnail(t)})}),e.loadThumbnail=function(t){e.$parent.$parent.updateStore(t),e.imageData=t},e.removePhoto=function(){e.imageData=null,e.$parent.$parent.updateStore(void 0)};var a=function(){"undefined"!=typeof e.imageUrl&&e.loadThumbnail(e.imageUrl)};document.addEventListener("deviceready",a),window.parent.document.addEventListener("deviceready",a)}}}]),angular.module("app.core").directive("takeBarcode",["$log","Plugin",function(e,t){return{restrict:"E",require:"ngModel",templateUrl:"components/mdDynamicForm/fields/md-barcode.tpl.html",link:function(n,a,o,i){n.codeType=o.codeType,a.on("click",function(){var a=t.getSource("barcodeScanner");a!==!1&&a.scan(function(e){var t="object"==typeof e?e.text:e;n.$parent.$parent.updateStore(t),i.$setViewValue(t)},function(t){i.$setValidity("error",!1),e.error(t)})}),n.clear=function(){n.$parent.$parent.updateStore(""),i.$setViewValue("")}}}}]),angular.module("app.core").directive("mdSignature",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,a){var o=t[0],i=new SignaturePad(o);i.onEnd=function(){var e=i.toDataURL();a.$setViewValue(e)};var r=o.getContext("2d");if(window.devicePixelRatio){var s=o.width,l=o.height,c=s,d=l;o.setAttribute("width",s*window.devicePixelRatio),o.setAttribute("height",l*window.devicePixelRatio),t.css("width",c+"px"),t.css("height",d+"px"),r.scale(window.devicePixelRatio,window.devicePixelRatio)}void 0!=e.inputModel&&""!=e.inputModel&&i.fromDataURL(e.inputModel),e.$watch("inputModel",function(e,t){void 0==e?i.clear():e!=t&&i.fromDataURL(e)})}}}),angular.module("app.core").directive("mdSelect",["$rootScope","StoreFactory","$parse","$filter","$timeout","OptionFactory",function(e,t,n,a,o,i){return{restrict:"A",require:"ngModel",link:function(n,r,s,l){var c=null,d=i.get(n.pageName+"."+n.name);n.options=void 0===d?n.$parent.options:d,n.$parent.searchable===!0&&(c=$(r),o(function(){c.selectpicker(),c.change(function(){l.$setViewValue(c.val())})})),"undefined"!=typeof n.$parent.optionsfilter&&(n.selectionValid=function(){var e=n.$parent.inputModel,i=!1;angular.forEach(n.$parent.optionsfilter,function(e,n){var a=t.evaluate(e);"undefined"!=typeof a&&(i===!1&&(i={}),i[n]=a)});var r=!1;if(i!==!1){var s=a("filter")(n.$parent.options,i);angular.forEach(s,function(t){t.value==e&&(r=!0)})}r===!1&&(l.$setViewValue(""),null!==c&&o(function(){c.selectpicker("deselectAll").selectpicker("refresh")}))},n.calcFilter=function(){"undefined"!=typeof n.optionsfilter&&(n.filterString={},angular.forEach(n.optionsfilter,function(e,a){var o=t.evaluate(e);"undefined"!=typeof o&&(n.filterString[a]=o)}),null!==c&&o(function(){c.selectpicker("refresh")}))},e.$on("StoreChanged",function(){n.calcFilter(),n.selectionValid()}),n.calcFilter(),n.selectionValid())}}}]),angular.module("app.core").directive("mdCheckbox",["OptionFactory",function(e){return{restrict:"E",scope:{required:"=",options:"=",name:"=",model:"=",iconSelected:"@",iconUnselected:"@",validators:"@"},templateUrl:"components/mdDynamicForm/fields/md-checkbox.tpl.html",require:"^form",link:function(t,n,a,o){
var i=e.get(t.$parent.$parent.pageName+"."+t.$parent.name);t.options=void 0===i?t.$parent.options:i;var r=function(){var e=!0;(t.required===!0||"true"==t.required)&&(e=!1,angular.forEach(t.model,function(t){t===!0&&(e=!0)})),o[t.name].$setValidity("validationValid",e)};r(),t.makeSelection=function(e){void 0==t.model&&(t.model={}),t.model[e]=!t.model[e],r()},t.getClasses=function(e){var n={};if(void 0!==e["icon-selected"]?n[e["icon-selected"]]=void 0!=t.model&&1==t.model[e.id]:n[t.iconSelected]=void 0!=t.model&&1==t.model[e.id],void 0!==e["icon-unselected"]?n[e["icon-unselected"]]=void 0===t.model||1!=t.model[e.id]:n[t.iconUnselected]=void 0==t.model||1!=t.model[e.id],1===Object.keys(n).length){var a=void 0!==n[t.iconUnselected]?t.iconUnselected:e["icon-unselected"];n[a]=!0}return n}}}}]),angular.module("app.core").directive("mdRadio",["OptionFactory","ActionFactory",function(e,t){return{restrict:"E",scope:{required:"=",options:"=",name:"=",model:"=",iconSelected:"@",iconUnselected:"@",validators:"@",actions:"="},templateUrl:"components/mdDynamicForm/fields/md-radio.tpl.html",require:"^form",link:function(t,n,a,o){var i=e.get(t.$parent.$parent.pageName+"."+t.$parent.name);t.options=void 0===i?t.$parent.options:i;var r=function(){var e=!0;(t.required===!0||"true"==t.required)&&(e="undefined"!=typeof t.model),o[t.name].$setValidity("validationValid",e)};r(),t.makeSelection=function(e){t.model=e,r()},t.getClasses=function(e){var n={};if(void 0!==e["icon-selected"]?n[e["icon-selected"]]=void 0!=t.model&&t.model==e.value:n[t.iconSelected]=void 0!=t.model&&t.model==e.value,void 0!==e["icon-unselected"]?n[e["icon-unselected"]]=void 0==t.model||t.model!=e.value:n[t.iconUnselected]=void 0==t.model||t.model!=e.value,1===Object.keys(n).length){var a=void 0!==n[t.iconUnselected]?t.iconUnselected:e["icon-unselected"];n[a]=!0}return n}}}}]),angular.module("app.core").directive("validation",["ValidationFactory","$log",function(ValidationFactory,$log){return{restrict:"A",require:"ngModel",link:function($scope,elem,attrs,ctrl){var validationObject=!1;"undefined"!=typeof attrs.validation&&""!=attrs.validation&&(validationObject=angular.fromJson(attrs.validation)),validationObject!==!1&&angular.forEach(validationObject,function(validation){if(void 0!=validation.name&&void 0!=validation.type){var validationFunction=null;if("custom"!=validation.type)validationFunction=function(e,t){return ValidationFactory.isValid(t,validation,$scope.pageName+"."+attrs.name)};else try{var code="validationFunction = "+validation.content;eval(code)}catch(e){$log.error("Could not eval validation function code.")}null!==validationFunction&&(ctrl.$validators[validation.name]=validationFunction)}}),$scope.$on("StoreChanged",function(){angular.forEach(validationObject,function(e){void 0!=e.name&&"regex"!=e.type&&ctrl.$setValidity(e.name,ctrl.$validators[e.name](null,ctrl.$viewValue))})})}}}]),angular.module("app.core").directive("validEmail",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,a){var o=function(e){return a.$setValidity("validationValid",/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)),e};a.$formatters.push(o),a.$parsers.push(o)}}}),angular.module("app.core").directive("mdTranslateQuestion",["$translate","$rootScope",function(e,t){return{restrict:"A",link:function(n,a,o){t.translate&&(n.translate=function(){"undefined"!=typeof o.mdTranslateQuestion&&e(o.mdTranslateQuestion+".placeholder").then(function(e){n.placeholder=e},function(){n.placeholder=n.$parent.$parent.placeholder})},n.translate(),t.$on("$translateChangeSuccess",function(){n.translate()}))}}}]),angular.module("app.core").directive("mdGroup",["StoreFactory","$rootScope",function(e,t){return{scope:{name:"@",repeat:"="},restrict:"E",replace:!1,transclude:!0,template:"<div id='{{name}}'><ng-transclude></ng-transclude><div ng-if='repeat == true' class='group-controls'><button class='btn btn-success' ng-disabled='form.$invalid' ng-click='addItem()'><span class='icon icon-plus-circle2'></span> Add</button></div></div>",require:"?form",link:function(t,n,a,o){var i=null,r=t.$parent.$parent.page;t.repeat&&(t.form=o,i="data__.repeater."+r.name+"."+t.name),t.addItem=function(){var t={},a=n.find("md-question");angular.forEach(a,function(n){var a=angular.element(n).attr("ng-attr-name");t[a]=e.get(r.name+"."+a)}),null!==i&&(e.push(i,t),angular.forEach(a,function(t){var n=angular.element(t).attr("ng-attr-name");e.set(r.name+"."+n,void 0)}))}}}}]),angular.module("app.core").directive("mdList",["StoreFactory","$interpolate","ActionFactory","$timeout","$log",function(e,t,n,a,o){return{scope:{name:"@",content:"=",model:"@",theme:"@",search:"=",classes:"@",actions:"=",expressions:"=",autoscroll:"="},restrict:"E",replace:!1,transclude:!0,templateUrl:"components/area/mdList/mdList.tpl.html",require:"?^scrollableItem",controller:["$scope","$element",function(t,i){var r=angular.element(i)[0].attributes.row;return void 0!=r&&(t.row=r.value),t.listItemClasses="",void 0!=t.classes&&t.classes.length>0&&(t.listItemClasses=t.classes),"bootstrap"==t.theme&&(t.listItemClasses+=" list-group-item ",t.listClasses="list-group"),t.show=!0,t.evalExpressions=function(){angular.forEach(t.expressions,function(n,a){t[a]=e.evaluate(n)})},a(function(){t.evalExpressions()}),t.$on("StoreChanged",function(){t.evalExpressions()}),t.clickListItem=function(a){if(void 0!=t.actions&&t.actions.length>0){var i=void 0;if(void 0!=t.model)try{i=e.get(t.model)[a]}catch(r){o.error(r)}else i=t.content[a];n.triggerEvent("click",t.actions,{$item:i})}},t.remove=function(n){void 0!=t.model&&e.remove(t.model,n)},t.getItems=function(){return void 0!==t.model?e.get(t.model):t.content},t}],link:function(t,o,i,r){if(t.autoscroll===!0&&(a(function(){r.scrollToBottom()}),void 0!==t.model)){var s=null;t.$watchCollection(function(){return e.get(t.model)},function(){null!==s&&a.cancel(s),s=a(function(){n.triggerEvent("data-changed",t.actions)},500),a(function(){r.scrollToBottom()})})}}}}]),angular.module("app.core").directive("compileListRow",["$compile","$rootScope",function(e,t){return{restrict:"A",scope:{item:"="},require:"^mdList",controller:["$scope",function(e){return{$index:e.$parent.$index}}],link:function(n,a,o,i){n.compile=function(){var r=t.$new();r.$item=n.item,r.$item.$index=n.$parent.$index,r.$items=i.getItems(),r.$store=mdm.store,a.html(o.rowTemplate),e(a.contents())(r)},n.compile()}}}]),angular.module("app.core").directive("deleteBtn",function(){return{restrict:"E",scope:{},transclude:!0,require:["^compileListRow","^mdList"],template:'<button class="btn btn-default" ng-click="remove()"><ng-transclude></ng-transclude></button>',link:function(e,t,n,a){e.remove=function(){a[1].remove(a[0].$index)}}}}),angular.module("app.core").directive("mdTitle",function(){return{restrict:"E",replace:!1,transclude:!0,template:"<h1 ng-transclude></h1>",link:function(e,t,n){}}}),angular.module("app.core").directive("mdQuestion",["$http","$rootScope","$parse","$filter","$timeout","SchemaService","$templateCache","$log","StoreFactory","ActionFactory",function(e,t,n,a,o,i,r,s,l,c){return{scope:{itemType:"@",name:"@",label:"@",placeholder:"@",message:"@","default":"@",validators:"=",expressions:"=",show:"@",disabled:"@",required:"@",model:"@",description:"@","extends":"=",leftIcon:"@",rightIcon:"@",classes:"@",options:"=",optionsfilter:"=",searchable:"=",multiline:"=",content:"@",max:"@",min:"@",dual:"=",step:"@",actions:"=",optionSource:"@",labelProperty:"@",valueProperty:"@",groupProperty:"@",onText:"@",offText:"@",vertical:"=",iconSelected:"@",iconUnselected:"@",displayValue:"=",decimals:"@"},restrict:"E",template:'<div id="{{::name}}" ng-if="show" class="form-group item-{{itemType}} {{classes}}" ng-class="{\'has-error\': (form[name].$invalid === true && showValidations()), \'has-success\': (form[name].$invalid === false && showValidations()), \'no-error\': (type == \'static\')}"><label class="control-label">{{label}} <span class="required-asterix fa fa-star" ng-if="required == \'true\'  && form[name].$invalid === true"></span></label><p class="description" ng-if="description">{{::description}}</p><div ng-include="templateUrl"></div><div ng-show="form[name].$invalid === true && showValidations()" ng-messages="form[name].$error"><div class="form-input-error" ng-message="required"><span class="icon icon-cancel-circle"></span> {{message}}</div><div class="form-input-error" ng-repeat="validation in validators" ng-message-exp="validation.name"><span class="fa fa-times"></span> {{validation.message}}</div></div></div>',require:"^form",link:function(e,t,n,o){function i(e){if("number"==typeof e||"boolean"==typeof e)return!1;if("undefined"==typeof e||null===e)return!0;if("undefined"!=typeof e.length)return 0==e.length;var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return 0==t}e.setTemplate=function(){switch(e.itemType){case"select":e.templateUrl="components/mdDynamicForm/fields/templates/select.tpl.html",e.defaultMessage="Please make a selection";break;case"radio":e.templateUrl="components/mdDynamicForm/fields/templates/radio.tpl.html",e.defaultMessage="Please make a selection";break;case"checkbox":e.templateUrl="components/mdDynamicForm/fields/templates/checkbox.tpl.html",e.defaultMessage="Please make a selection";break;case"date":e.templateUrl="components/mdDynamicForm/fields/templates/date.tpl.html",e.defaultMessage="Please provide a valid date";break;case"time":e.templateUrl="components/mdDynamicForm/fields/templates/time.tpl.html",e.defaultMessage="Please provide a valid time";break;case"datetime":e.templateUrl="components/mdDynamicForm/fields/templates/datetime.tpl.html",e.defaultMessage="Please provide a valid date & time";break;case"number":e.templateUrl="components/mdDynamicForm/fields/templates/number.tpl.html",e.defaultMessage="Please provide a number";break;case"email":e.templateUrl="components/mdDynamicForm/fields/templates/email.tpl.html",e.defaultMessage="Please provide a valid email address";break;case"slider":e.dual?e.templateUrl="components/mdDynamicForm/fields/templates/range-slider.tpl.html":e.templateUrl="components/mdDynamicForm/fields/templates/slider.tpl.html",e.defaultMessage="Please choose a value";break;case"rating":e.templateUrl="components/mdDynamicForm/fields/templates/rating.tpl.html",e.defaultMessage="Please provide a rating";break;case"barcode":e.templateUrl="components/mdDynamicForm/fields/templates/barcode.tpl.html",e.defaultMessage="Please capture the barcode";break;case"qrcode":e.templateUrl="components/mdDynamicForm/fields/templates/qrcode.tpl.html",e.defaultMessage="Please capture the QR code";break;case"signature":e.templateUrl="components/mdDynamicForm/fields/templates/signature.tpl.html",e.defaultMessage="Please provide your signature";break;case"switch":e.templateUrl="components/mdDynamicForm/fields/templates/switch.tpl.html",e.defaultMessage="Please make a selection";break;case"password":e.templateUrl="components/mdDynamicForm/fields/templates/password.tpl.html",e.defaultMessage="This is a required field";break;case"text":e.multi=void 0!=e.multiline?e.multiline:!1,e.templateUrl="components/mdDynamicForm/fields/templates/text.tpl.html",e.defaultMessage="This is a required field";break;default:void 0!==e["extends"]&&(e.type=e["extends"].type,e.itemType=e["extends"]["item-type"],e.setTemplate())}},e.setTemplate(),e.message="undefined"!=typeof e.message?e.message:e.defaultMessage,e.form=o;var r=e.$parent.$parent.page||e.$parent.$parent.$parent.page;e.pageName=r.name,e.key=e.pageName+"."+e.name,e.inputModel=l.get(e.pageName+"."+e.name),e.updateStore=function(t){l.set(e.pageName+"."+e.name,t)},e.$watch("inputModel",function(t,n){if(e.updateStore(t),t!==n&&("radio"===e.itemType||"rating"===e.itemType||"record-audio"===e.itemType)){var a=!1;angular.forEach(e.actions,function(t){a===!1&&"change"==t.event&&(c.triggerEvent(t.event,e.actions),a=!0)})}},!0),void 0===e.inputModel&&void 0!==e["default"]&&(e.updateStore(e["default"]),e.inputModel=e["default"]),e.disabled=void 0==e.disabled?!1:e.disabled,e.required=void 0==e.required?!1:e.required,e.show=void 0==e.show?!0:e.show,e.search=void 0==e.search?!1:e.search,e.evalExpressions=function(){angular.forEach(e.expressions,function(t,n){var i=l.evaluate(t);if("default"==n)e.inputModel=angular.copy(i);else if("defaultValue"==n&&"select"==e.itemType&&void 0!==o[e.name]&&o[e.name].$untouched===!0){var r=a("filter")(e.options,{value:i})[0];void 0!==r&&(e.inputModel=angular.copy(r))}e[n]=i})},e.evalModel=function(){void 0!=e.model&&(e.inputModel=l.evaluate(e.model))},e.userInput=function(){void 0!==o[e.name]&&o[e.name].$setTouched(!0)},e.evalExpressions(),e.evalModel(),e.$on("StoreChanged",function(){e.evalExpressions(),e.evalModel()}),e.$watch(function(){return l.get(e.pageName+"."+e.name)},function(t){e.inputModel=t,void 0!==e.form[e.name]&&(e.form[e.name].$pristine=!1)},!0),"select"==e.itemType&&void 0!=e.optionSource&&e.$watchCollection(function(){return l.get(e.optionSource)},function(t){var n=[];void 0!=e.labelProperty||void 0!=e.valueProperty||void 0!=e.groupValue?angular.forEach(t,function(t){var a={value:void 0!=e.valueProperty?t[e.valueProperty]:t.value,label:void 0!=e.labelProperty?t[e.labelProperty]:t.label,group:void 0!=e.groupProperty?t[e.groupProperty]:t.group};n.push(a)}):n=t,e.options=n}),e.showValidations=function(){return!i(e.inputModel)||e.form[e.name].$pristine===!1}}}}]),angular.module("app.core").directive("numberFormat",["$filter",function(e){return{restrict:"A",require:"ngModel",link:function(t,n,a,o){var i=parseInt(a.decimalPlaces);isNaN(i)===!1&&(o.$formatters.push(function(t){var n=parseFloat(t);return isNaN(n)===!0?void 0:(void 0!==t&&(t=e("number")(t,i),t=parseFloat(t.replace(",",""))),o.$setViewValue(t),t)}),o.$parsers.push(function(e){if(void 0!==e&&null!==e){var t=e.toString(),n=t.split(".");if(void 0!==n[1]&&n[1].length>i)return o.$setViewValue(o.$modelValue),o.$render(),o.$modelValue}return e}))}}}]),angular.module("app.core").directive("mdChart",["$http","StoreFactory",function(e,t){return{restrict:"E",replace:!0,scope:{name:"@",title:"@",options:"@","default":"=",width:"@",height:"@",itemType:"@",model:"@"},template:'<div class="chart-block"><h4 ng-if="title">{{title}}</h4><canvas chart="{{itemType}}" options="options" data="data" width="width" height="height" responsive="true"></canvas></div>',link:function(e){var n=document.body.clientWidth-40;e.width=void 0!=e.width?e.width:n,e.height=void 0!=e.height?e.height:n/100*70;var a=t.get(e.$parent.$parent.page.name+"."+e.name);void 0!=a?e.data=a:"undefined"!=typeof e["default"]&&(e.data=e["default"]),void 0!=e.model&&e.$watch(function(){return t.get(e.model)},function(t){e.data=t})}}}]),angular.module("app.core").directive("mdCustom",["$http","$templateCache",function(e,t){return{scope:{name:"@",url:"@",data:"="},restrict:"E",template:'<div id="{{name}}" ng-if="show" class="form-group"><div ng-include="templateUrl"></div></div>',link:function(n,a,o){n.show=!0,"undefined"!=typeof o.url&&(void 0===t.get(o.url)&&e.get(o.url).then(function(e){t.put(o.url,e.data)},function(){$log.error('Could not load specified template URL "'+o.url+'": '),o.show=n.show=!1}),n.templateUrl=o.url)}}}]);var link=function(e,t,n,a){var o=function(){var t=!0;(e.required===!0||"true"==e.required)&&(t="undefined"!=typeof e.model&&(e.model.floor>0||e.model.ceiling>0)),a[e.name].$setValidity("validationValid",t)};o(),e.$watch("model",function(){o()},!0),e.cancelSwipe=function(e){return!1}};angular.module("app.core").directive("mdSlider",function(){return{restrict:"E",scope:{required:"=",name:"=",model:"=",min:"@",max:"@",step:"@",validators:"@",actions:"="},template:'<slider ng-swipe-left="cancelSwipe($event)" ng-swipe-right="cancelSwipe($event)" md-actions="{{actions}}" ng-model="model.floor" validation="{{validators}}" floor="{{min}}" ceiling="{{max}}" step="{{step}}"></slider><input type="hidden" name="{{name}}" ng-required="required" ng-model="model.floor" />',require:"^form",link:link}}).directive("mdRangeSlider",function(){return{restrict:"E",scope:{required:"=",name:"=",model:"=",min:"@",max:"@",step:"@",validators:"@",actions:"="},template:'<slider md-actions="{{actions}}" ng-model="model.floor" ng-model-range="model.ceiling" validation="{{validators}}" floor="{{min}}" ceiling="{{max}}" step="{{step}}"></slider><input type="hidden" name="{{name}}" ng-required="required" ng-model="model.floor" />',require:"^form",link:link}}),angular.module("app.core").directive("mdButton",["$rootScope","StoreFactory","$timeout",function(e,t,n){return{restrict:"E",template:'<div class="md-button-container"><a id="{{id}}" class="btn {{class}}" md-actions="{{actions}}" ng-class="" ng-disabled="disabled" ng-show="show"><span ng-transclude></span></a></div>',replace:!0,transclude:!0,scope:{id:"@",theme:"@",actions:"=",expressions:"="},require:"^form",link:function(a,o,i,r){a.show=!0,a.disabled=!1,a["class"]=void 0===a.theme||"default"===a.theme?"btn-default":a.theme,a.evalExpressions=function(){angular.forEach(a.expressions,function(e,n){"$form.invalid"!=e&&(a[n]=t.evaluate(e))})},e.$on("StoreChanged",function(){a.evalExpressions()}),a.$watch(function(){return r.$invalid},function(){angular.forEach(a.expressions,function(e,t){"$form.invalid"==e&&(a[t]=r.$invalid)})}),n(function(){a.evalExpressions()},200)}}}]),angular.module("app.core").directive("mdActions",["$log","ActionFactory",function(e,t){return{restrict:"A",link:function(e,n,a){if(void 0!=a.mdActions&&""!=a.mdActions){var o=angular.fromJson(a.mdActions),i=[];angular.forEach(o,function(e){if(void 0!==e.event&&-1==i.indexOf(e.event)){switch(e.event){case"enter":n.bind("keydown",function(n){var a=n.keyCode||n.which;13===a&&t.triggerEvent(e.event,o)});break;default:n.bind(e.event,function(){t.triggerEvent(e.event,o)})}i.push(e.event)}})}}}}]),angular.module("app.core").value("Themes",[]),angular.module("app.core").directive("themes",["Themes","$rootScope",function(e,t){return{restrict:"A",link:function(t,n){t.$watch(function(){return e},function(e,t){e!=t&&angular.forEach(e,function(e){void 0!=e.content&&n.append("<style type='text/css'>"+e.content.replace(/\\n/g).replace(/\\r/g).replace(/\\t/g)+"</style>")})},!0)}}}]),angular.module("app.core").directive("mdAttributes",["StoreFactory","$timeout",function(e,t){return{restrict:"A",scope:{mdAttributes:"="},link:function(n,a,o){var i={},r={};o.mdExpressions&&(r=angular.fromJson(o.mdExpressions)),void 0!=n.mdAttributes&&angular.forEach(n.mdAttributes,function(e,t){"string"==typeof e&&e.indexOf("{{")>-1&&(i[t]=e)}),n.setAttributes=function(){angular.forEach(i,function(t,n){o.$set(n,e.parse(t))})},n.evalExpressions=function(){Object.keys(r).length>0&&angular.forEach(r,function(t,n){switch(n){case"show":var o=e.evaluate(t);o===!0?a.removeClass("ng-hide"):a.addClass("ng-hide")}})},n.$on("StoreChanged",function(){n.setAttributes(),n.evalExpressions()}),t(function(){n.setAttributes(),n.evalExpressions()})}}}]),angular.module("app.core").directive("mdExpressions",["StoreFactory","$timeout",function(e,t){return{restrict:"A",scope:{mdExpressions:"="},link:function(n,a,o){var i={};o.mdExpressions&&(i=angular.fromJson(o.mdExpressions)),n.evalExpressions=function(){Object.keys(i).length>0&&angular.forEach(i,function(t,n){switch(n){case"show":var o=e.evaluate(t);o===!0?a.removeClass("ng-hide"):a.addClass("ng-hide")}})},n.$on("StoreChanged",function(){n.evalExpressions()}),t(function(){n.evalExpressions()})}}}]),angular.module("app.core").directive("openDocument",["electron","Plugin",function(e,t){return{restrict:"E",template:"<button class=\"btn btn-primary\" ng-click=\"open()\"><span class=\"icon\" ng-class=\"{'icon-file-pdf': (type == 'pdf'), 'icon-file-word': (type == 'worddocument')}\"></span> Open Document</button>",scope:!0,link:function(n,a,o){n.type=o.itemType,n.open=function(){var n=t.getSource("fileopener");n!==!1?n.openFile(function(){},function(){},o.path):void 0!==window.electron_client?e.shell.openItem(o.path):window.open(o.path,"_blank")}}}}]),angular.module("app.core").directive("imageViewer",["StoreFactory",function(e){return{restrict:"E",templateUrl:"components/mdDynamicForm/imageViewer/imageViewer.tpl.html",scope:{src:"@",model:"@"},link:function(t){t.multiple=!1,t.image=void 0,void 0!==t.model?t.$watch(function(){return e.get(t.model)},function(e){angular.isArray(e)?t.image=e[e.length-1]:t.image=e},!0):void 0!==t.src&&(t.image=t.src)}}}]),angular.module("app.core").directive("mediaPlayer",["StoreFactory",function(e){return{restrict:"E",templateUrl:"components/mdDynamicForm/mediaPlayer/mediaPlayer.tpl.html",scope:{src:"@",model:"@",multiple:"@",actions:"=",itemType:"@",name:"@"},link:function(t){function n(e){void 0!==e&&(angular.isArray(e)&&e.length>0?t.src=e[e.length-1]:t.src=e)}var a=t.$parent.$parent.page||t.$parent.$parent.$parent.page;if(t.pageName=a.name,t.key=t.pageName+"."+t.name,void 0===t.src&&void 0!==t.model){t.$watch(function(){return e.get(t.model)},function(e){n(e)},!0);var o=e.get(t.model);n(o),t.fileType="video"==t.itemType?"video/mp4":""}}}}]).filter("trusted",["$sce",function(e){return function(t){return e.trustAsResourceUrl(t)}}]),angular.module("app.core").directive("audioPlayer",["AudioRecording","$rootScope","$timeout","$interval","$log","$sce","electron",function(e,t,n,a,o,i,r){return{restrict:"E",templateUrl:"components/mdDynamicForm/mediaPlayer/audioPlayer.tpl.html",scope:{src:"@"},link:function(t,n,i){function s(){if(void 0!==t.src){var n=t.src.split("."),a=n[n.length-1].toLowerCase();if("m4a"===a&&void 0===r.app){t.defaultPlayer=!1;try{e.setSource(t.key,t.src),t.canPlay()}catch(i){o.error("Audio error: failed to get audio info",t.src,i),t.audioLoadError=!0}}else"mp3"===a||"mpeg"===a||"m4a"===a&&void 0!==r.app?(t.defaultPlayer=!0,c.src=t.src):(o.error("Audio error: unknown file type",t.src),t.audioLoadError=!0)}}t.key=t.$parent.key?t.$parent.key:"audio"+Date.now(),t.isPlaying=!1,t.defaultPlayer=!1,t.audioLoadError=!1,t.nativeCurrentTime=0,t.currentTime=t.totalTime="0:00",t.$$lastDuration=0,t._pollRate=250;var l=null,c=n[0].getElementsByClassName("audio-player-element")[0],d=(n[0].getElementsByClassName("playhead")[0],n[0].getElementsByClassName("filler")[0]),u=n[0].getElementsByClassName("timeline")[0],p=u.offsetWidth,m=null;t.timeUpdate=function(n){p=u.offsetWidth;var i=n/l,r=p*i;if(d.style.width=r+"px",1e3*n>=1e3*l-t._pollRate)if(t.isPlaying=!1,d.style.width="0px",t.defaultPlayer)c.pause(),c.currentTime=0;else{t.nativeCurrentTime=0,e.seekTo(t.key,0),a.cancel(m);try{e.getState(t.key)!==e.states.IDLE&&e.stopPlayAudio(t.key)}catch(s){o.error(s)}}t.updateCurrentPos()},t.updateCurrentPos=function(){var e=t.defaultPlayer?c.currentTime:t.nativeCurrentTime,n=Math.floor(e),a=Math.floor(n/60),o=n%60;t.currentTime=""+a+":"+(10>o?"0":"")+o},t.clickPercent=function(e){return(e.pageX-u.offsetLeft)/p},t.setSeekTime=function(n){var o=l*t.clickPercent(n);t.defaultPlayer?c.currentTime=o:(e.seekTo(t.key,1e3*o),a.cancel(m))},t.playButton=function(){try{if(t.isPlaying)t.defaultPlayer?(c.pause(),t.isPlaying=!1):(e.pausePlayAudio(t.key),a.cancel(m),t.isPlaying=!1);else if(t.defaultPlayer)c.play(),t.isPlaying=!0;else try{e.playAudio(t.key),m=a(function(){e.getState(t.key)===e.states.PLAYING_AUDIO&&e.getCurrentPosition(t.key,function(e){e>-1&&(t.timeUpdate(e),t.nativeCurrentTime=e)},o.error)},t._pollRate),t.isPlaying=!0}catch(n){t.isPlaying=!1}}catch(n){t.audioLoadError=!0,o.error("Error playing audio file",t.src,n)}},t.canPlay=function(){var n=0,o=a(function(){n+=100,n>2e3&&a.cancel(o);var i=t.defaultPlayer?c.duration:e.getDuration(t.key);if(i>0){if(l=i,l!==t.$$lastDuration){t.$$lastDuration=l,(void 0===l||0>l)&&(l=0);var r=Math.floor(l%60),s=Math.floor(l/60);t.totalTime=""+s+":"+(10>r?"0":"")+r}a.cancel(o)}},100)},t.init=function(){s(),t.updateCurrentPos()},i.$observe("src",function(e){e&&t.init()}),t.init(),document.addEventListener("audio-recording-finished",function(e){e.detail.src==t.src&&t.init()},!1),u.addEventListener("click",function(e){t.setSeekTime(e)},!1),c.addEventListener("timeupdate",function(){t.timeUpdate(c.currentTime)},!1),c.addEventListener("canplaythrough",function(){t.canPlay()},!1)}}}]),angular.module("app.core").directive("recordAudio",["StoreFactory","AudioRecording","$interval","$log","ActionFactory","$timeout",function(e,t,n,a,o,i){return{restrict:"E",templateUrl:"components/mdDynamicForm/fields/record-audio.tpl.html",scope:{name:"@",label:"@",actions:"=",expressions:"=",smallrecorder:"=",multiple:"="},link:function(i){i.isRecording=!1,i.isPopulated=!1,i.currentTime="0:00",i._recordStartTime=null,i._recordTimer=null;var r=i.$parent.$parent.page||i.$parent.$parent.$parent.page;i.pageName=r.name,i.model="data__.media."+i.name+".audio";var s=e.get(i.model);null!==s&&void 0!==s&&angular.isArray(s)&&s.length>0&&(i.isPopulated=!0),i.recordingStart=function(){i.isRecording=!0,i._recordStartTime=Date.now(),i.updateTime(),i._recordTimer=n(i.updateTime,250),o.triggerEvent("recording-started",i.actions)},i.recordingStop=function(t){var n=e.get(i.model);null!==n&&void 0!==n&&angular.isArray(n)||(n=[]),i.multiple?n.push(t):n[0]=t,e.set(i.model,n),i.isPopulated=!0,o.triggerEvent("recording-finished",i.actions)},i.recordButton=function(){try{i.isRecording?(t.stopRecordAudio(i.key,i.actions).then(i.recordingStop)["catch"](console.error),i.isRecording=!1,i._recordStartTime=null,n.cancel(i._recordTimer)):t.recordAudioWithCompression(i.key,i.actions).then(i.recordingStart)["catch"](console.error)}catch(e){a.error("AAC Audio recording is not available on this device, or there was an error with recording:",e)}},i.updateTime=function(){if(i.isRecording){var e=Date.now(),t=i._recordStartTime-e,n=t/1e3,a=Math.abs(n),o=Math.floor(a/60),r=Math.floor(a%60);i.currentTime=""+o+":"+(10>r?"0":"")+r}}}}}]),angular.module("app.core").directive("mediaGallery",["StoreFactory","MediaViewerDisplay","ActionFactory","$rootScope",function(e,t,n,a){return{restrict:"E",templateUrl:"components/mdDynamicForm/imageViewer/imageViewer.tpl.html",scope:{sources:"=",actions:"="},link:function(o){function i(){o.files=[];var t=[];o.staticFiles.forEach(function(e){o.files.push(e)}),o.models.forEach(function(n){var a=e.get(n);angular.isArray(a)?a.forEach(function(e){void 0!==e&&t.push(e)}):void 0!==a&&t.push(a)}),t.sort(function(e,t){var n=e.split("/"),a=t.split("/"),o=parseInt(n[n.length-1].split(".")[0],10),i=parseInt(a[a.length-1].split(".")[0],10);return o>i?1:i>o?-1:0}),t.forEach(function(e){o.files.push(e)})}o.multiple=!0,o.files=[],o.models=[],o.staticFiles=[];for(var r=0;r<o.sources.length;r++){var s=o.sources[r];if(s.indexOf("{")>-1){var l=s.replace(/\{|}/g,"");o.models.push(l)}else o.staticFiles.push(a.assetDir+s)}void 0!==o.models&&o.models.length>0&&(console.log("watching"),o.models.forEach(function(t){o.$watch(function(){return e.get(t)},function(){i()},!0)})),i(),o.getFileType=function(e){if(void 0===e)return"none";var t=e.split("."),n=t[t.length-1].toLowerCase();return"aac"===n||"m4a"===n||"mp3"===n||"wav"===n?"audio":"image"},o.getViewableFilePath=function(e){if(void 0===e)return"";var t=e.split("/");return t[t.length-1]},o.close=function(){var e=document.querySelector("#mediaViewerDisplayUi");document.body.removeChild(e)},o.open=function(e){var a=o.files[e];void 0!==a&&t.open(a,o.actions).then(function(t){var a=o.actions[t];void 0!==a&&(a.data.index=e,a.data.model=o.model,n.call(a)().then(function(){o.close()})["catch"](function(){o.close()}))})["catch"](function(){o.close()})}}}}]),angular.module("app.core").factory("MediaViewerDisplay",["$q","$compile","$rootScope",function(e,t,n){function a(a,o){var i=e.defer(),r='<div id="mediaViewerDisplayUi" class="image-viewer-display-container"><div class="image-frame"><img ng-if="fileType === \'image\'" ng-src="{{src}}" /><audio-player class="col-md-4 col-xs-12" item-type="{{fileType}}" src="{{src | trusted}}" ng-if="fileType === \'audio\'"></audio-player></div><div class="image-footer"><a ng-repeat="action in actions track by $index" href="javascript:void(0)" class="{{action.data.theme || \'\'}}" ng-click="callAction($index)"><span ng-if="action.data[\'left-icon\']" class="fa {{action.data[\'left-icon\']}}"></span> {{action.data.label}} <span ng-if="action.data[\'right-icon\']" class="fa {{action.data[\'right-icon\']}}"></span></a><a href="javascript:void(0)" ng-click="close()" class="primary"><span class="fa fa-close"></span> Close</a></div></div>',s=n.$new(!0);s.src=a,s.actions=o;var l=s.src.split("."),c=l[l.length-1];s.fileType="aac"===c||"m4a"===c||"mp3"===c?"audio":"image",s.close=function(){i.reject()},s.callAction=function(e){i.resolve(e)};var d=angular.element(t(r)(s))[0];return document.body.appendChild(d),i.promise}var o={open:a};return o}]),angular.module("app.core").directive("mdThumbnail",["$log","Plugin","Platform",function(e,t,n){return{restrict:"A",scope:{mdThumbnail:"@"},link:function(a,o){a.genThumb=function(){if(void 0!==a.mdThumbnail){var i=t.getSource("thumbnail"),r="winphone"===n.getName();i===!1||r?(r&&"/"!==a.mdThumbnail[0]&&a.mdThumbnail.length>0&&(a.mdThumbnail="/"+a.mdThumbnail),o.attr("src",a.mdThumbnail)):i.makeThumbnail(function(e){o.attr("src",e)},function(t){e.error(t)},a.mdThumbnail,200,200,100)}},a.genThumb(),a.$watch("mdThumbnail",function(){a.genThumb()})}}}]),angular.module("app.core").directive("scrollableItem",function(){return{restrict:"A",scope:!1,controller:["$scope","$element",function(e,t){return{scrollToBottom:function(){t[0].scrollTop=t[0].scrollHeight}}}]}}),angular.module("app.core").factory("SchemaHelper",["$filter",function(e){function t(e){return a("name",e,o.schema.config)[0]}function n(t){return e("filter")(o.schema.config,{"item-type":t})}function a(e,t,n){n=void 0!==n?n:o.schema;var i=[];for(var r in n)n.hasOwnProperty(r)&&("object"==typeof n[r]&&"actions"!=r?i=i.concat(a(e,t,n[r])):r==e&&n[e]==t&&i.push(n));return i}var o={schema:{},getSchemaConfigItemByName:t,getSchemaConfigItemsByItemType:n,search:a};return o}]),angular.module("app.core").factory("SchemaService",["$http","$q","$rootScope","$log","$translate","tmhDynamicLocale","$templateCache","angularLoad","$location","StoreFactory","PluginFactory","$timeout","localStorageService","OptionFactory","ApiFactory","UrlFactory","Timer","Themes","VariableFactory","$base64","ActionFactory","RouterConfig","Router","Auth","SchemaHelper","IBeaconFactory","GeofenceFactory","XmppFactory","Notification","Platform",function(e,t,n,a,o,i,r,s,l,c,d,u,p,m,f,g,v,h,y,b,$,w,S,k,A,E,x,C,T,I){function D(e){var t=!1;return angular.forEach(W.content,function(n){"page"==n.type&&n.name==e&&(t=n)}),t}function _(){return W.components}function F(){return X}function P(){return"undefined"!=typeof W.translation&&"undefined"!=typeof W.translation.data?W.translation.data:!1}function N(){return"undefined"!=typeof W.translation&&"undefined"!=typeof W.translation["default"]?W.translation["default"]:!1}function M(){var e=2;return"undefined"!=typeof W.animation&&(e="off"!==W.animation?"full"==W.animation?2:1:0),e}function q(e){return"undefined"!=typeof W.translation&&"undefined"!=typeof W.translation.data&&"undefined"!=typeof W.translation.data[e]?W.translation.data[e]:!1}function R(){var n=t.defer();return e.get(z).success(function(e){W=e,n.resolve(W),J++}).error(function(e){n.reject(e)}),n.promise}function L(a){var o=t.defer();return e.get(n.basedir+"validation_schema.json").success(function(e){var t=tv4.validate(a,e);t?o.resolve(!0):o.reject(t)}).error(function(e){o.reject(e)}),o.promise}function U(e){var n=t.defer();return void 0!==e.settings&&e.settings.auth===!0?k.authenticate().then(function(){n.resolve()})["catch"](function(e){n.reject(e)}):n.resolve(),n.promise}function O(){S.addRoute("/error",{template:'<div class="error-container"><div class="alert alert-danger"><span class="fa fa-exclamation-triangle"></span> {{$root.errorMessage || "An unknown error has occurred"}}</div><div class="controls"><a href="#" class="btn md-btn btn-primary" onclick="javascript:location.reload();"><span class="fa fa-refresh"></span> Reload</a></div></div>'
})}function j(e){var o=t.defer();return W=A.schema=e,n.appName=W.name,n.cancelable=W.cancelable===!0,n.basedir=void 0==W.basedir?"":W.basedir,n.assetDir=void 0!==W.assetDir?W.assetDir:"user-assets/",w.set("id",n.appName),a.debug("Initializing store..."),c.init(n.appName,W).then(function(){if(I.init(),a.debug("Store initialized."),void 0!==W.settings){if(void 0!==W.settings.theme&&""!=W.settings.theme){var t=angular.element(document.querySelector("head")),i=angular.element("<link rel='stylesheet' href='"+n.basedir+"assets/css/themes/"+W.settings.theme+".css' />");t.append(i)}void 0!==W.settings.router&&(void 0!==W.settings.router.mode&&w.set("mode",W.settings.router.mode),void 0!==W.settings.router.animation&&w.set("animation",W.settings.router.animation)),void 0!==W.settings["push-notifications"]&&T.init(W)}m.init(n.appName),U(W).then(function(){L(e).then(function(){if(void 0!=W.config){var e=[];angular.forEach(W.config,function(t){if(void 0!=t.name)switch(t["item-type"]){case"onload":e.push(t);break;case"api":void 0!==t.url&&f.init(t);break;case"xmpp":void 0!==t.endpoint&&C.init(t);break;case"plugin":d.init(t);break;case"theme":h.push(t);break;case"variable":y.init(t);break;case"function":c.setFunction(t);break;case"url":g.init(t);break;case"ibeacon":E.init(),E.addBeacon(t);break;case"geofence":if(x.isValidGeofenceObject(t)){var n="com.commontime.md10."+W.name;x.init(W.name,n),x.register(t)}break;case"timer":void 0==mdm.__timers&&(mdm.__timers={}),mdm.__timers[t.name]=new v(t.name,t["timer-type"],t.time,t.actions)}}),e.length>0&&e.forEach(function(e){$.triggerEvent("onload",e.actions)})}if("undefined"!=typeof W.styles&&W.styles.length>0&&angular.forEach(W.styles,function(e){s.loadCSS(e).then(function(){})["catch"](function(){a.error('Could not load specified stylesheet "'+e+'"')})}),"undefined"!=typeof W.scripts&&W.scripts.length>0){angular.element(document.getElementsByTagName("head"));angular.forEach(W.scripts,function(e){s.loadScript(e).then(function(){})["catch"](function(){a.error('Could not load specified script "'+e+'"')})})}void 0!=W.components&&W.components.length>0&&W.components.forEach(function(e){switch(e.type){case"web-component":case"polymer":var t=document.createElement("link");t.setAttribute("rel","import"),t.setAttribute("href","data:text/html;base64,"+e.content),document.getElementsByTagName("head")[0].appendChild(t);break;case"web-component-es2015":var n=document.createElement("script");n.setAttribute("src","data:application/javascript;base64,"+e.content),document.getElementsByTagName("body")[0].appendChild(n);break;case"directive":var n=document.createElement("script");n.text=b.decode(e.content),document.getElementsByTagName("body")[0].appendChild(n)}}),angular.forEach(W.pages,function(e){var t=H(angular.element("<div></div>"),e.content),n=A.search("type","go-to-page",e.content),a=[];n.length>0&&angular.forEach(n,function(e){void 0!=e.data&&e.data.length>0&&a.push(e.data)});var o=[];void 0!==e.config&&e.config.length>0&&e.config.forEach(function(e){"onload"==e["item-type"]&&void 0!==e.actions&&e.actions.length>0&&e.actions.forEach(function(e){o.push(e)})});var i=void 0!==e.settings&&e.settings.auth===!0;S.addRoute("/"+e.name,{template:t[0].innerHTML,possibilities:a,actions:o,start:e.start,auth:i})}),O(),o.resolve(!0)},function(){a.error(tv4.error),n.errorMessage="An invalid schema has been provided: "+tv4.error.message,O(),l.path("/error"),o.resolve(error)})})["catch"](function(e){a.error(e),n.errorMessage=e,O(),l.path("/error"),o.resolve(e)})})["catch"](function(e){a.error(e)}),o.promise}function V(e){z=e;var n=t.defer();return R(e).then(function(e){j(e).then(function(e){n.resolve(e)},function(e){n.reject(e)})},function(e){n.reject(e)}),n.promise}function B(e){var a=!1;switch(e.type){case"question":(void 0===e["extends"]||"question"==e["extends"].type)&&(a=angular.element('<md-question id="'+e.name+'"></md-question>'));break;case"content":switch(e["item-type"]){case"markdown":case"html":a=angular.element('<md-content id="'+e.name+'"><div>'+e.content+"</div></md-content>");break;case"list":a=angular.element("<md-list id='"+e.name+"'></md-list>");break;case"title":a=angular.element("<md-title id='"+e.name+"'>"+e.content+"</md-list>");break;case"group":a=e.repeat?angular.element('<md-group ng-form name="'+e.name+'" isolate-form id="'+e.name+'"></md-group>'):angular.element('<md-group id="'+e.name+'"></md-group>')}break;case"control":switch(e["item-type"]){case"button":void 0!==e["left-icon"]&&(e.content="<span class='fa "+e["left-icon"]+"'></span> "+e.content),void 0!==e["right-icon"]&&(e.content=e.content+" <span class='fa "+e["right-icon"]+"'></span>"),a=angular.element('<md-button id="'+e.name+'">'+e.content+"</md-button>");break;case"record-audio":a=angular.element('<record-audio id="'+e.name+'"></record-audio>')}break;case"area":switch(e["item-type"]){case"static":a=angular.element('<section class="static-item panel panel-default" id="'+e.name+'"></section>');break;case"scrollable":a=angular.element('<section class="scrollable-item" id="'+e.name+'" scrollable-item></section>');break;case"row":a=angular.element('<section class="row-item navbar navbar-default" id="'+e.name+'"></section>')}a!==!1&&void 0!=e.expressions&&Object.keys(e.expressions).length>0&&a[0].setAttribute("md-expressions",angular.toJson(e.expressions));break;case"chart":a=angular.element('<md-chart id="'+e.name+'"></md-chart>');break;case"component":if(a=angular.element(e.template),void 0!=e.content&&e.content.length>0&&a.append(e.content),void 0!=e.attributes)switch(e["item-type"]){case"directive":break;case"polymer":case"web-component":case"web-component-es2015":default:if(angular.forEach(e.attributes,function(e,t){angular.isObject(e)&&(e=angular.toJson(e)),a[0].setAttribute(t,e)}),a[0].setAttribute("md-attributes",angular.toJson(e.attributes)),void 0!=e.expressions&&Object.keys(e.expressions).length>0&&a[0].setAttribute("md-expressions",angular.toJson(e.expressions)),void 0!=e.actions&&e.actions.length>0){var o=[];angular.forEach(e.actions,function(e){-1===["click","blur","change","focus"].indexOf(e.event)?document.addEventListener(e.event,function(){t.when().then($.call(e))}):o.push(e)}),o.length>0&&a[0].setAttribute("md-actions",angular.toJson(o))}}break;case"media":switch(e["item-type"]){case"gallery":void 0!==e.sources&&e.sources.length>0&&(a=angular.element("<media-gallery></media-gallery>"));break;case"image":(void 0!==e.fileName||void 0!==e.model)&&(a=angular.element("<image-viewer></image-viewer>"),void 0!==e.fileName&&a.attr("src",n.assetDir+e.fileName));break;case"video":case"audio":(void 0!==e.model||void 0!==e.fileName)&&(a=angular.element("<media-player></media-player>"),void 0!==e.fileName&&a.attr("src",n.assetDir+e.fileName));break;case"pdf":case"worddocument":void 0!==e.fileName&&(a=angular.element('<open-document path="'+n.assetDir+e.fileName+'"></open-document>'))}break;default:a=G(e)}return a||(a=G(e)),a}function G(e){var t=!1;return void 0!=e["extends"]&&(e.type=e["extends"].type,e["item-type"]=e["extends"]["item-type"],t=B(e)),t}function H(e,t){for(var n=0;n<t.length;n++){var a=t[n],o=B(a);o!==!1&&("component"!=a.type&&angular.forEach(a,function(e,t){("content"!=t&&"fileName"!=t||"list"==a["item-type"])&&("object"==typeof e&&(e=angular.toJson(e)),o[0].setAttribute(t,e))}),"undefined"!=typeof a.content&&"object"==typeof a.content&&(o=H(o,a.content)),e.append(o))}return e}function Y(){var e={};return angular.forEach(W,function(t,n){-1===["pages","translation"].indexOf(n)&&(e[n]=t)}),e}var W=A.schema,X={},z=null,J=0,Q={getPages:function(){return W.pages},buildItems:H,initApp:V,getDom:F,buildDom:j,getTranslation:q,getTranslations:P,getDefaultLanguage:N,getPageSchema:D,getAppData:Y,getAnimationLevel:M,getComponents:_};return Q}]),angular.module("app.core").factory("ValidationFactory",["StoreFactory",function(e){function t(t,n,a){var o=!0;switch(n.type){case"regex":if(void 0!=t&&""!=t){var i=new RegExp(n.content);o=i.test(t)}break;case"expression":var r=angular.copy(n.content),s=null;if(r.indexOf(a)>-1){var l=new RegExp(a,"g");s="string"==typeof t?"'"+angular.copy(t)+"'":angular.copy(t),null!==s&&(r=r.replace(l,s))}var c=angular.copy(r);if(null!==s){var l=new RegExp(s+".","g");c=c.replace(l,"")}c=c.replace(/(['"].*['"])/g),c.indexOf(".")>-1?o=e.evaluate(r):void 0!=t&&""!=t&&(o=e.evaluate(r));break;default:$log.error("Invalid validation type specified.")}return o}var n={isValid:t};return n}]),angular.module("app.core").factory("TranslationService",["$q","SchemaService",function(e,t){return function(n){var a=e.defer(),o=t.getTranslation(n.key);return o!==!1?a.resolve(o):a.reject(n.key),a.promise}}]),angular.module("app.core").factory("StoreFactory",["$rootScope","$parse","$interval","$interpolate","$log","$q","localStorageService","StoreProvider","$timeout",function(e,t,n,a,o,i,r,s,l){function c(e){return t(e)(mdm.store)}function d(e,n,a){var o=t(e),i=o.assign;return i(a||mdm.store,n),$(),t(e)(a||mdm.store)}function u(e,n){var a=t(e)(mdm.store);return void 0==a&&(a=[]),a.push(n),d(e,a),$(),t(e)(mdm.store)}function p(e,n){var a=t(e)(mdm.store);void 0!=a&&void 0!=a[n]&&a.splice(n,1),d(e,a),$()}function m(){var e=i.defer();return C.get(A+"_data").then(function(t){T=t._rev,mdm.store=S(angular.copy(x),t.data),void 0!==s.options.initialData&&(mdm.store=S(mdm.store,s.options.initialData)),e.resolve()})["catch"](function(){C.put({_id:A+"_data",data:angular.copy(x)}).then(function(t){void 0!==s.options.initialData&&(mdm.store=S(mdm.store,s.options.initialData)),T=t.rev,e.resolve()})["catch"](function(t){o.error(t),e.reject(t)})}),e.promise}function f(){null!==A&&r.remove(A+"_stack"),null!==C&&C.destroy().then(function(){})["catch"](function(){o.error("Couldn't remove PouchDB database for '"+$routeParams.app_name+"'")})}function g(e,t){var n=i.defer();return A=e,C=new PouchDB(A),void 0!==t.settings&&t.settings.encryption===!0?C.crypto(E).then(function(){m().then(function(){d("data__.schema",angular.copy(t)),n.resolve()})["catch"](function(e){n.reject(e)})}):m().then(function(){d("data__.schema",angular.copy(t)),n.resolve()})["catch"](function(e){n.reject(e)}),n.promise}function v(t){return"object"==typeof t?angular.forEach(t,function(n,a){void 0!=n&&"string"==typeof n&&"*"!=n&&(t[a]=e.$eval(t[a],mdm.store))}):void 0!=t&&"*"!=t&&(t=e.$eval(t,mdm.store)),t}function h(e,t,n){var o=void 0===t?mdm.store:t;n===!0&&(o=S(angular.copy(mdm.store),t)),"object"==typeof e?angular.forEach(e,function(a,o){"string"==typeof a&&a.indexOf("{{")>-1?e[o]=h(e[o],t,n):"object"==typeof a&&angular.toJson(a).indexOf("{{")>-1&&(e[o]=h(e[o],t,n))}):void 0!=e&&"*"!=e&&(e=a(e)(o));try{return angular.fromJson(e)}catch(i){return e}}function y(e,t){if(e.indexOf("{{")>-1&&(e=h(e)),void 0!=t&&0!==Object.getOwnPropertyNames(t).length){var n="?";angular.forEach(t,function(e,t){"?"!=n&&(n+="&"),e.indexOf("{{")>-1&&(e=h(e)),n+=t+"="+encodeURI(e)}),e+=n}return e}function b(){var e=angular.copy(mdm.store);return e.data__.schema=void 0,e}function $(){null!==A&&null!==C&&null!==T&&(null!==D&&l.cancel(D),D=l(function(){C.put({_id:A+"_data",_rev:T,data:b()}).then(function(e){T=e.rev})["catch"](function(e){o.error(e)})},100))}function w(e){if(void 0!=e.name&&void 0!=e.content)try{var t=[];void 0!=e.params&&e.params.length>0&&angular.forEach(e.params,function(e){t.push(e.name)}),mdm[e.name]=new Function(t,e.content),mdm[e.name].prototype.sync=e.sync===!0}catch(n){o.info("Couldn't successfully eval function code (store.fct.js:148): "),o.error(n)}}function S(e,t){return angular.forEach(t,function(n,a){"object"!=typeof n||null===n?e[a]=n:(void 0==e[a]&&("[object Array]"===Object.prototype.toString.call(t[a])?e[a]=[]:e[a]={}),e[a]=S(e[a],n))}),e}function k(e){mdm.store=S(mdm.store,e),$()}var A=null,E="1x28ucKW25UFbvZb10f/dN1ZjnOyPCWufYVDQnC8Ji7WabM9pRo6PkwjgRhaqDmFb20+TBCc/W0H8PsV0cfo1+8WIHz81joB";mdm.store={data__:{env:{},state:{},api:{},xmpp:{},geofences:{},plugin:{},repeater:{},schema:{},media:{},notification:{},xcallback:{success:"",error:"",cancel:"",source:""},variables:{today:new Date}}};var x=angular.copy(mdm.store),C=null,T=null,I={init:g,evaluate:v,parse:h,get:c,set:d,push:u,remove:p,setFunction:w,parseUrl:y,save:$,destroy:f,merge:S,mergeInitialData:k},D=null;e.$watch(function(){return mdm.store},function(t,n){t!=n&&($(),e.$broadcast("StoreChanged"),document.dispatchEvent(new CustomEvent("StoreChanged")))},!0);var _=function(){e.$$phase||e.$apply()};return document.addEventListener("StoreHasChanged",_),e.$on("StoreHasChanged",_),I}]).filter("store",["StoreFactory","$filter",function(e,t){var n=function(n,a){if(void 0!=n){var o=e.evaluate(n);return angular.isArray(o)&&void 0!=a&&(o=t("filter")(o,a)),o}};return n.$stateful=!0,n}]).filter("trust",["$sce",function(e){var t=function(t){return e.trustAsHtml(t)};return t.$stateful=!0,t}]),angular.module("app.core").provider("StoreProvider",function(){this.options={},this.set=function(e,t){switch(console.log("StoreProvider set called"),e){case"initialData":this.options.initialData=t;break;default:console.log("Invalid Option: An invalid option was specified.")}};var e=this;this.$get=function(){return{options:e.options,set:e.set}}}),angular.module("app.core").factory("Plugin",["$http","$log","$q","StoreFactory","$interval","electron",function(e,t,n,a,o,i){function r(e,t,n,i){if(this.name=e,this.events=[],this.polls=[],this.operations=i,void 0!=t&&(this.events=t,this.events.length>0)){var r=this;angular.forEach(this.events,function(e){window.addEventListener(e.name,function(t){a.set("data__.plugin."+r.name+"."+e.name,t)})})}if(void 0!=n&&(this.polls=n,this.polls.length>0)){var r=this;angular.forEach(this.polls,function(e){o(function(){r.callAction(e.action,e.params,e.options)},e.interval)})}}return r.prototype={callAction:function(e,o){var i=n.defer(),s=[];angular.forEach(this.operations,function(t){t.name==e&&void 0!=t.params&&(s=angular.copy(t.params))});var l=function(t){a.set("data__.plugin."+p.name+"."+e,t),i.resolve()},c=function(e){t.error(e),i.reject(e)},d=[];angular.forEach(s,function(e){var t=null;switch(e.name){case"$successCallback":t=l;break;case"$errorCallback":t=c;break;default:t=void 0!=o[e.name]?o[e.name]:e["default"]}null!==t&&d.push(t)});var u=r.getSource(this.name);if(u!==!1&&void 0!=u[e]){var p=this;try{u[e].apply(null,d)}catch(m){i.reject(m),t.error(m)}}else i.reject("Could not call action");return i.promise}},r.getSource=function(e){if(void 0!==window[e])return window[e];if(void 0!==window.cordova&&void 0!==cordova[e])return cordova[e];if(void 0!==window.cordova&&void 0!==cordova.plugins&&void 0!==cordova.plugins[e])return cordova.plugins[e];if(void 0!==window.plugins&&void 0!==window.plugins[e])return window.plugins[e];if(void 0!==navigator&&void 0!==navigator[e])return navigator[e];if(void 0===i.app)return t.info("Plugin '"+e+"' is not available."),!1;try{return require(e)}catch(n){return console.log(n),!1}},r}]),angular.module("app.core").factory("OptionFactory",["$rootScope","$parse","localStorageService",function(e,t,n){function a(e){return t(e)(r)}function o(e){i=e;var t=n.get(e+"_options");null!==t&&(r=t)}var i=null,r={},s={init:o,get:a};return s}]),angular.module("app.core").factory("Api",["$http","$log","$q","StoreFactory","$injector","$httpParamSerializer",function(e,t,n,a,o,i){function r(e,t,n,a,o){this.name=e,this.url=t,this.params=n,this.headers=a,this.operations=o}return r.prototype={makeRequest:function(r,s,l){var c=n.defer(),d=this.name,u=!1;void 0==s&&(s={});var p=null;if(angular.forEach(this.operations,function(e){r==e.name&&(p=e)}),null!==p){var m={url:this.url+p.path,method:p.method,params:{},data:{},headers:{}};void 0!==p["content-type"]&&p["content-type"].length>0&&(m.headers["Content-Type"]=p["content-type"]),"JSONP"==m.method&&(m.params.callback="JSON_CALLBACK");var f=function(){var e=n.defer();return e.resolve(),e.promise},g=[f],v=function(e){var o=n.defer(),i=void 0;if(void 0!=s[e.name]?i=s[e.name]:void 0!=e["default"]?i=e["default"]:e.required===!0&&o.reject("Parameter '"+e.name+"' must be provided."),void 0!=i)switch("string"==typeof i&&i.indexOf("{{")>-1&&(i=a.parse(i)),e["in"]){case"query":m.params[e.name]=i,o.resolve();break;case"body":m.data[e.name]=i,o.resolve();break;case"formData":if(u===!1&&(m.data=new FormData),m.headers["Content-Type"]=void 0,"file"==e.type)try{window.resolveLocalFileSystemURL(i,function(t){t.file(function(t){var n=new FileReader;n.onloadend=function(n){m.data.append(e.name,new Blob([n.target.result],{type:t.type})),o.resolve()},n.readAsArrayBuffer(t)})},function(e){t.error(e),o.reject(e)})}catch(r){t.error(r),o.reject(r)}else m.data.append(e.name,i),o.resolve();u=!0;break;case"path":m.url=m.url.replace("{{"+e.name+"}}",i),o.resolve();break;case"header":m.headers[e.name]=i,o.resolve();break;default:o.reject("Unknown parameter location")}else o.resolve();return o.promise};angular.forEach(this.params,function(e){g.push(v(e))}),n.all(g).then(function(){var a=[f];angular.forEach(p.params,function(e){a.push(v(e))}),n.all(a).then(function(){"application/x-www-form-urlencoded"==m.headers["Content-Type"]&&(m.data=i(m.data)),e(m).then(function(e){if(void 0!=l){var t=o.get("ActionFactory"),a=n.when();angular.forEach(l,function(e){"success"==e.event&&(a=a.then(t.call(e)()))})}c.resolve(e.data)})["catch"](function(e){var a=!1,i=o.get("ActionFactory");if(void 0!==l){var r=n.when();angular.forEach(l,function(e){"fail"==e.event&&(r=r.then(i.call(e)))})}a===!1&&n.when().then(i.call({type:"show-notification",data:{type:"error",title:"API Call Failed!",content:"Could not successfully complete the API call '"+d+"'."}})),t.error(e),c.reject(e)})})["catch"](function(e){t.error(e),c.reject(e)})})}else c.reject("Requested operation could not be found.");return c.promise}},r.merge=function(e,t){var n={};return void 0!=e&&(n=e),void 0!=t&&angular.forEach(t,function(e,t){"object"!=typeof e?n[t]=e:(void 0==n[t]&&(n[t]={}),n[t]=merge(n[t],e))}),n},r}]),angular.module("app.core").factory("ApiFactory",["$http","$log","StoreFactory","$timeout","$q","Api","LoadingStatus","AzureApi",function(e,t,n,a,o,i,r,s){function l(e){switch(e["api-type"]){case"azure":d[e.name]=new s(e.name,e.url,e["app-id"],e["auth-type"],e.params,e.headers,e.operations,e.actions);break;default:d[e.name]=new i(e.name,e.url,e.params,e.headers,e.operations,e.actions)}}function c(e,i){var s=o.defer(),l=e.name;return void 0!=d[l]&&(r.loading=!0,r.message=u.message,void 0!=e.message&&(r.message=n.parse(e.message)),d[l].makeRequest(e.operation,e.params,i).then(function(t){n.set("data__.api."+l+"."+e.operation,t),a(function(){r.loading=!1},1e3),s.resolve(t)})["catch"](function(e){t.error(e),s.reject(e),r.loading=!1,r.error="There was an error retrieving data"})),s.promise}var d={},u={loading:!1,error:!1,message:"Loading data..."},p={init:l,makeRequest:c};return p}]),angular.module("app.core").factory("AzureApi",["$http","$log","StoreFactory","$timeout","localStorageService","$q","Api",function(e,t,n,a,o,i,r){function s(e,t,n,a,i,r,s,c){this.name=e,this.url=t,this.appId=n,this.authType=a,this.params=i,this.headers=r,this.operations=s,this.actions=c,this.client=new l(this.url,this.appId);var d=o.get(this.name+"_auth");null!==d&&(this.client.currentUser=d)}var l=WindowsAzure.MobileServiceClient;return s.prototype={makeRequest:function(e,t){var a=i.defer(),o=null;if(angular.forEach(this.operations,function(t){e==t.name&&(o=t)}),null!==o){var r={method:o.method,parameters:{},body:{},headers:{}};"JSONP"==r.method&&(r.params.callback="JSON_CALLBACK");var s=!0,c=this;angular.forEach(this.params,function(e){if(s){var o=void 0;if(void 0!=t[e.name]?o=t[e.name]:void 0!=e["default"]?o=e["default"]:e.required===!0&&(a.reject("Parameter '"+e.name+"' must be provided."),s=!1),void 0!=o)switch(o.indexOf("{{")>-1&&(o=n.parse(o)),e["in"]){case"query":r.params[e.name]=o;break;case"body":r.data[e.name]=o;break;case"formData":r.headers["Content-Type"]="multipart/form-data",r.data[e.name]=o;break;case"path":c.url=c.url.replace("{{"+e.name+"}}",o),c.client=new l(c.url,c.appId)}}}),s=!0,angular.forEach(o.params,function(e){if(s){var o=void 0;if(void 0!=t[e.name]?o=t[e.name]:void 0!=e["default"]?o=e["default"]:e.required===!0&&(a.reject("Parameter '"+e.name+"' must be provided."),s=!1),void 0!=o)switch(o.indexOf("{{")>-1&&(o=n.parse(o)),e["in"]){case"query":r.params[e.name]=o;break;case"body":r.body[e.name]=o;break;case"formData":r.headers["Content-Type"]="multipart/form-data",r.body[e.name]=o;break;case"path":c.url=c.url.replace("{{"+e.name+"}}",o),c.client=new l(c.url,c.appId)}}}),angular.forEach(this.headers,function(e){void 0!=e["default"]&&(r.headers[e.name]=e["default"])}),angular.forEach(o.params,function(e){void 0!=e["default"]&&(r.headers[e.name]=e["default"])}),this.client.invokeApi(this.name,r).done(function(e){a.resolve(e.response)},function(e){e.request.status&&""!=c.authType?c.login().then(function(){c.client.invokeApi(c.name,r).done(function(e){a.resolve(e.response)},function(e){a.resolve(e)})},function(e){a.reject(e)}):a.reject(e)})}return a.promise},login:function(){var e=i.defer(),t=this;return this.client.login(this.authType).done(function(n){t.client.currentUser=n,o.set(t.name+"_auth",n),e.resolve(n)},function(t){e.reject(t)}),e.promise}},s}]),angular.module("app.core").factory("PluginFactory",["Plugin","$timeout","StoreFactory","LoadingStatus","$q",function(e,t,n,a,o){function i(t){s[t.name]=new e(t.name,t.events,t.polls,t.operations)}function r(e,i,r){var c=o.defer();a.loading=!0,a.message=l.message;var d=n.parse(angular.copy(r));return s[e].callAction(i,d).then(function(){t(function(){a.loading=!1},1e3),c.resolve()})["catch"](function(){a.loading=!1,a.error="There was an error calling the plugin",c.reject()}),c.promise}var s={},l={loading:!1,error:!1,message:"Calling plugin..."},c={init:i,callAction:r};return c}]),angular.module("app.core").value("LoadingStatus",{loading:!1,error:!1,message:"Loading data..."}),angular.module("app.core").factory("ActionFactory",["$q","StoreFactory","ApiFactory","PluginFactory","$rootScope","$location","$log","UrlFactory","toastr","VariableFactory","Router","Camera","AudioRecording","Notification","$parse","IBeaconFactory","GeofenceFactory","XmppFactory","SchemaHelper",function($q,StoreFactory,ApiFactory,PluginFactory,$rootScope,$location,$log,UrlFactory,toastr,VariableFactory,Router,Camera,AudioRecording,Notification,$parse,IBeaconFactory,GeofenceFactory,XmppFactory,SchemaHelper){function evalOperations(e,t){var n=!1;if(void 0!==e&&e.length>0){e=void 0===t?StoreFactory.parse(e):StoreFactory.parse(e,t,!0);var a="";angular.forEach(e,function(e){switch(e.type){case"value":var t=null;t=angular.isNumber(e.content)||parseInt(e.content)||parseFloat(e.content)?" "+e.content:" '"+e.content+"'",a+=t;break;case"operator":case"connector":a+=" "+e.content}});try{n=$parse(a)({})}catch(o){$log.error("Could not evaluate the logic expression")}}return n}function triggerEvent(e,t,n){var a=$q.when(),o=0,i={},r={};return angular.forEach(t,function(t){if(void 0===t.event||t.event==e)switch(t.type){case"if":o++,void 0!==t.operations&&t.operations.length>0&&(i[o]=evalOperations(angular.copy(t.operations),n),r[o]!==!0&&i[o]===!0&&(r[o]=!0));break;case"end-if":o--;break;case"otherwise":i[o]=r[o]!==!0;break;case"otherwise-if":void 0!==t.operations&&t.operations.length>0&&(i[o]=evalOperations(angular.copy(t.operations),n)),r[o]!==!0&&i[o]===!0&&(r[o]=!0);break;default:i[o]!==!1&&(a=a.then(function(){return call(t,n)()}))}}),$flow={},a}function evalExpressions(e,t){return angular.forEach(e,function(e,n){"expressions"!=n&&("object"==typeof e?t[n]=evalExpressions(e,t[n]):t[n]=StoreFactory.evaluate(e))}),t}function call(action,model){return angular.isObject(model)===!1&&(model={}),model.$flow=angular.copy($flow),"loop"!==action.type&&(action=StoreFactory.parse(angular.copy(action),model,!0)),function(){var deferred=$q.defer();void 0!==action.name&&action.name.length>0&&($flow[action.name]={success:null,error:null});var _success=function(e){void 0!==action.name&&void 0!==$flow[action.name]&&($flow[action.name].success=e),deferred.resolve(e)},_error=function(e){$log.error("Action Error [action.fct.js]:",e),void 0!==action.name&&void 0!==$flow[action.name]&&($flow[action.name].error=e),deferred.reject(e)};switch(void 0!==action.expressions&&(action=evalExpressions(action.expressions,action)),action.type){case"set-model":try{var key=action.data.location,value=action.data.value;void 0!==key?(StoreFactory.set(key,value),_success(value)):_error("Model location has not been specified.")}catch(e){_error(e)}break;case"call-api":ApiFactory.makeRequest(action.data,action.actions).then(_success)["catch"](_error);break;case"send-xmpp-message":case"resend-xmpp-message":XmppFactory.send(action.data).then(_success)["catch"](_error);break;case"xmpp-login":XmppFactory.login(action.data).then(_success)["catch"](_error);break;case"xmpp-logout":XmppFactory.logout(action.data).then(_success)["catch"](_error);break;case"xmpp-mark-read":XmppFactory.markRead(action.data).then(_success)["catch"](_error);break;case"xmpp-enable-dnd":XmppFactory.toggleDoNotDisturb(action.data,!0).then(_success)["catch"](_error);break;case"xmpp-disable-dnd":XmppFactory.toggleDoNotDisturb(action.data,!1).then(_success)["catch"](_error);break;case"call-plugin":PluginFactory.callAction(action.data.name,action.data.operation,action.data.params).then(_success)["catch"](_error);break;case"call-url":UrlFactory.makeRequest(action.data).then(_success)["catch"](_error);break;case"call-x-callback-url":var url=null;switch(action.data.type){case"x-success":url=StoreFactory.get("data__.xcallback.success");break;case"x-error":url=StoreFactory.get("data__.xcallback.error");break;case"x-cancel":url=StoreFactory.get("data__.xcallback.cancel")}url=StoreFactory.parseUrl(url,action.data.params),window.open(url),_success(url);break;case"go-back":$rootScope.navBack=!0;var previous=Router.lastRoute(),go=function(){$rootScope.navBack=!0,Router.go(previous),deferred.resolve()};$rootScope.$$phase?go():$rootScope.$apply(function(){go()}),_success(!0);break;case"go-to-page":$rootScope.navBack=!1;var previous=Router.lastRoute(),location=null;if("object"==typeof action.data?angular.forEach(action.data,function(e,t){null===location&&StoreFactory.evaluate(e)&&(location="/"+t)}):location="/"+action.data,null!==location){var go=function(){previous==location&&($rootScope.navBack=!0),Router.go(location),deferred.resolve()};$rootScope.$$phase?go():$rootScope.$apply(function(){go()}),_success(location)}else _error(!0);break;case"set-variable":VariableFactory.setVariable(action.data.name,action.data.value).then(_success)["catch"](_error);break;case"call-function":if(void 0!=action.data.name)if(void 0!=mdm[action.data.name]){void 0==action.data.params&&(action.data.params={});try{var paramsArr=[];angular.forEach(action.data.params,function(e){paramsArr.push(e)}),mdm[action.data.name].apply({$successCallback:_success,$errorCallback:_error,$flow:$flow},Array.prototype.slice.call(paramsArr,0)),mdm[action.data.name].prototype.sync!==!0&&_success(!0)}catch(e){$log.info("Couldn't successfully call function: "),$log.error(e),_error(e)}}else{var msg="Specified function doesn't exist";$log.error(msg),_error(msg)}else{var msg="Couldn't successfully call function";$log.error(msg),_error(msg)}break;case"inline-function":if(void 0!==action.data.code)try{var func=null;eval("func = function(){"+action.data.code+"}"),null!==func&&func.apply(model),deferred.resolve()}catch(error){$log.info("Couldn't successfully eval action code and bind to event (mdActions.drct.js:17): "),$log.error(error),deferred.reject(error)}else deferred.reject();break;case"start-timer":void 0!=action.data.name&&void 0!=mdm.__timers&&void 0!=mdm.__timers[action.data.name]?(mdm.__timers[action.data.name].start(),_success(!0)):_error(!0);break;case"stop-timer":void 0!=action.data.name&&void 0!=mdm.__timers&&void 0!=mdm.__timers[action.data.name]?(mdm.__timers[action.data.name].stop(),_success(!0)):_error(!0);break;case"show-notification":Notification.call(action.data).then(_success)["catch"](_error);break;case"take-photo":Camera.takePhoto(action.data.quality).then(function(e){if(void 0!==action.data.model){var t=StoreFactory.get(action.data.model);void 0===t&&(t=[]),void 0!==action.data.index&&void 0!==t[action.data.index]?t[action.data.index]=e:action.data.multiple===!0?t.push(e):t[0]=e,StoreFactory.set(action.data.model,t),_success(t)}else _error("Couldn't save photo response.")})["catch"](function(e){_error(e)});break;case"select-photo":Camera.selectPhoto().then(function(e){if(void 0!==action.data.model){var t=StoreFactory.get(action.data.model);void 0===t&&(t=[]),void 0!==action.data.index&&void 0!==t[action.data.index]?t[action.data.index]=e:action.data.multiple===!0?t.push(e):t[0]=e,StoreFactory.set(action.data.model,t),_success(t)}else _error("Couldn't save gallery response.")})["catch"](function(e){_error(e)});break;case"record-audio":AudioRecording.recordAudioWithCompression().then(_success)["catch"](_error);break;case"stop-record-audio":AudioRecording.stopRecordAudio().then(function(e){if(void 0!==action.data.model){var t=StoreFactory.get(action.data.model);void 0===t&&(t=[]),void 0!==action.data.index&&void 0!==t[action.data.index]?t[action.data.index]=e:action.data.multiple===!0?t.push(e):t[0]=e,StoreFactory.set(action.data.model,t),_success(t)}else _error("Could not save audio response.")})["catch"](function(e){_error(e)});break;case"play-audio":var fileName=Date.now();if(void 0!==action.data.model){var store=StoreFactory.get(action.data.model);angular.isString(store)&&store.search(/\.m4a$/gim)>-1?(AudioRecording.setSource(fileName,store),AudioRecording.playAudio(fileName),_success(store)):_error("Play Audio action failed, model location was not a playable file.")}else void 0!==action.data.fileName?angular.isString(action.data.fileName)&&action.data.fileName.search(/\.m4a$/gim)>-1?(AudioRecording.setSource(fileName,action.data.fileName),AudioRecording.playAudio(fileName),_success(action.data.fileName)):_error("Play Audio action failed, file location was not a playable file."):_error("Play Audio action failed, no valid location specified.");break;case"delete-media":if(void 0!==action.data.model){var store=StoreFactory.get(action.data.model);if(void 0!==store)if(angular.isArray(store))if(void 0!==action.data.index){var uri=store[action.data.index];if(void 0!==uri){var newStore=store;newStore.splice(action.data.index,1),StoreFactory.set(action.data.model,newStore),Camera.deleteMedia(uri).then(_success)["catch"](_error)}else _error("Could not delete media item")}else _error("Image index to delete has not been specified");else StoreFactory.set(action.data.model,void 0),_success(!0);else _error("Model location doesn't exist")}else _error("Model location missing.");break;case"start-beacon-listening":try{IBeaconFactory.startListening(),_success(!0)}catch(err){_error(err)}break;case"stop-beacon-listening":try{IBeaconFactory.stopListening(),_success(!0)}catch(err){_error(err)}break;case"loop":if(void 0!==action.data&&void 0!==action.data.model){var modelLocation=action.data.model.replace("{{","").replace("}}",""),items=StoreFactory.get(modelLocation);if(void 0!==items&&items.length>0){var subChain=$q.when();items.every(function(e){return subChain=subChain.then(function(){return triggerEvent("loop",action.actions,{$item:e})}),!0}),deferred.resolve(subChain)}}break;case"set-value":if(void 0!==action.data&&void 0!==action.data.key){var res=StoreFactory.set(action.data.key,action.data.value,model);_success(res)}else _error("Missing data.");break;case"start-geofence":try{GeofenceFactory.start(action.data.name).then(function(){_success(!0)},function(e){_error(e)})}catch(err){_error(err)}break;case"stop-geofence":try{GeofenceFactory.stop(action.data.name).then(function(){_success(!0)},function(e){_error(e)})}catch(err){_error(err)}break;default:_error("Invalid action type specified.")}return deferred.promise}}var service={
triggerEvent:triggerEvent,call:call,evalOperations:evalOperations},$flow={};return void 0===window.mdm.utils&&(window.mdm.utils={}),window.mdm.utils.callAction=function(e,t,n,a){call({type:e,data:t,expressions:n})().then(function(e){void 0!==a&&a(e)})},window.mdm.utils.updatePage=function(){$rootScope.$$phase||$rootScope.$apply()},window.mdm.utils.getMetadataItem=function(e){if(void 0!==SchemaHelper.schema.metadata){var t=SchemaHelper.schema.metadata;if(void 0!==t[e])return t[e]}return void 0},service}]),angular.module("app.core").factory("Url",["$http","$log","$q","StoreFactory",function(e,t,n,a){function o(e,t,n,a){this.name=e,this.url=t,this.target=n,this.params=a}return o.prototype={makeRequest:function(e,t){var i=n.defer(),r=this.url,s={url:r};return s.target=void 0!=e?e:this.target,t=o.merge(this.params,t),void 0!=t&&(s.params=a.parse(t)),s.url=a.parseUrl(s.url,s.params),window.open(s.url,s.target),i.promise}},o.merge=function(e,t){var n={};return void 0!=e&&(n=e),void 0!=t&&angular.forEach(t,function(e,t){"object"!=typeof e?n[t]=e:(void 0==n[t]&&(n[t]={}),n[t]=merge(n[t],e))}),n},o}]),angular.module("app.core").factory("UrlFactory",["$http","$log","StoreFactory","$timeout","$q","Url",function(e,t,n,a,o,i){function r(e){l[e.name]=new i(e.name,e.url,e.target,e.params)}function s(e){var t=o.defer(),n=e.name;return void 0!=l[n]&&l[n].makeRequest(e.target,e.params).then(function(){t.resolve()})["catch"](function(){t.reject()}),t.promise}var l={},c={init:r,makeRequest:s};return c}]),angular.module("app.core").factory("Timer",["$timeout","$interval","ActionFactory","$q",function(e,t,n,a){function o(e,t,n,a){this.timerFunction=null,this.name=e,this.type=t,this.time=parseInt(n),this.actions=a}return o.prototype={start:function(){var o=this.actions;"delay"==this.type?e(function(){var e=a.when();angular.forEach(o,function(t){e=e.then(n.call(t))})},1e3*this.time):"interval"==this.type&&(this.timerFunction=t(function(){var e=a.when();angular.forEach(o,function(t){e=e.then(n.call(t))})},1e3*this.time))},stop:function(){"interval"==this.type&&null!=this.timerFunction&&t.cancel(this.timerFunction)}},o}]),angular.module("app.core").factory("Variable",["$q","StoreFactory",function(e,t){function n(e,t,n){this.name=e,this.type=t,this.set(n)}return n.prototype={set:function(n){var a=e.defer();if(void 0!=n)if("string"==typeof n&&n.indexOf("{{")>-1&&(n=t.parse(n)),void 0!=this.name){var o=null;switch(this.type){case"date":o=Date.parse(n);break;case"string":o=n;break;case"int":o=parseInt(n);break;case"boolean":o="true"==n||"1"==n}this.value=mdm.store.data__.variables[this.name]=o,a.resolve(o)}else a.reject("Variable must have a name");else a.resolve();return a.promise}},n}]),angular.module("app.core").factory("VariableFactory",["Variable","$q",function(e,t){function n(t){o[t.name]=new e(t.name,t["variable-type"],t.value)}function a(e,n){var a=t.defer();return void 0!=o[e]?o[e].set(n).then(function(e){a.resolve(e)})["catch"](function(e){a.reject(e)}):a.reject("Cannot find variable '"+e+"'"),a.promise}var o={},i={init:n,setVariable:a};return i}]),angular.module("app.core").factory("Camera",["StoreFactory","$log","$q","Plugin","FileSystem","Platform",function(e,t,n,a,o,i){function r(e){return l(1,e).then(function(e){var t=n.defer(),a=function(e){t.reject(e)};return 0==e.length&&a("image path returned empty"),window.resolveLocalFileSystemURL(e,function(e){var n=new Date,i=n.getTime(),r=i+".jpg";o.getStorage().then(function(n){e.moveTo(n,r,function(e){e.file(function(e){t.resolve(e.localURL)},a)},a)})["catch"](a)},a),t.promise})}function s(){return l(0)}function l(e,o){var r=n.defer(),s=a.getSource("camera"),l=("winphone"===i.getName(),function(e){void 0!==e&&t.error(e),r.reject(e)});return s!==!1?s.getPicture(function(e){r.resolve(e)},l,{quality:o||50,destinationType:1,sourceType:e,allowEdit:!1,encodingType:0,saveToPhotoAlbum:!1}):l(),r.promise}function c(e){var a=n.defer(),o=function(e){t.error(e),a.reject(e)};return void 0!==window.requestFileSystem?window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(t){t.root.getFile(e,{create:!1},function(e){e.remove(function(){a.resolve()},function(){o("Error deleting the file: "+error.code)})},o)},o):o("requestFileSystem is not available"),a.promise}var d={takePhoto:r,selectPhoto:s,deleteMedia:c};return d}]),angular.module("app.core").factory("Auth",["$q","Plugin",function(e,t){function n(){var n=e.defer();return i=t.getSource("touchid"),i!==!1?i.isAvailable(function(){n.resolve()},function(){n.reject("Touch ID is not available for this device.")}):n.reject("No authentication method available."),n.promise}function a(t){var a=e.defer(),o=void 0!==t?t:"Authentication Required";return n().then(function(){i.verifyFingerprint(o,function(){a.resolve()},function(){a.reject("Authentication failed")})})["catch"](function(){a.resolve()}),a.promise}var o={authenticate:a},i=!1;return o}]),angular.module("app.core").factory("Notification",serviceFunc),serviceFunc.$inject=["$q","$log","StoreFactory","toastr","SchemaHelper","$injector","Plugin"],angular.module("app.core").factory("IBeaconFactory",["$injector","Plugin","$log",function(e,t,n){function a(){if(!k){if(h=t.getSource("locationManager"),h!==!1){try{y=e.get("ActionFactory"),h.requestAlwaysAuthorization(),h.isBluetoothEnabled().then(function(e){e||h.enableBluetooth()}).fail(console.error).done()}catch(a){console.error("Error loading iBeacon plugin",a)}var o=new h.Delegate;o.didExitRegion=function(e){s(e)},o.didRangeBeaconsInRegion=function(e){r(e)},h.setDelegate(o)}else n.error("Beacon plugin has not successfully initialised.");k=!0}}function o(e){return Math.round((255-Math.abs(e))/255*100)}function i(e,t){return e.signalStrength<t.signalStrength?1:e.signalStrength>t.signalStrength?-1:0}function r(e){var t=e.beacons[0];if(void 0!==t){var n=!1;for(var a in S){var r=S[a];if(r.uuid.toLowerCase()==t.uuid.toLowerCase()){var s=t.proximity.toLowerCase().replace("proximity","");r.proximity!=t.proximity&&b.forEach(function(e){void 0!==e.uuid&&void 0!==r.uuid&&e.uuid.toLowerCase()===r.uuid.toLowerCase()&&y.triggerEvent(s,e.actions)}),r.proximity=t.proximity,r.accuracy=t.accuracy,r.signalStrength=o(t.rssi),n=!0}}if(!n)for(var a in b){var l=b[a];l.uuid.toLowerCase()==t.uuid.toLowerCase()&&(S.push({title:l.name,major:l.major,minor:l.minor,uuid:l.uuid,accuracy:t.accuracy,proximity:t.proximity,signalStrength:o(t.rssi)}),y.triggerEvent("in-range",l.actions))}var c=S[0].uuid;S.sort(i);var d=S[0].uuid;if(c.toLowerCase()!=d.toLowerCase()){var u=S[0];for(var a in b){var l=b[a];l.uuid.toLowerCase()==u.uuid.toLowerCase()&&y.triggerEvent("closest",l.actions)}}}}function s(e){var t=e.region.uuid;for(var n in S){var a=S[n];if(a.uuid.toLowerCase()==t.toLowerCase()){S.splice(n,1);for(var o in b){var i=b[o];i.uuid.toLowerCase()==t.toLowerCase()&&y.triggerEvent("out-of-range",i.actions)}}}}function l(e){if(b.push(e),void 0!==window.cordova){var t=g(e);e.rangingEnabled&&($.push(e),h.startRangingBeaconsInRegion(t).fail(console.error).done(),e.ranging=!0),h.startMonitoringForRegion(t).fail(console.error).done(),e.monitoring=!0}}function c(){angular.forEach(b,function(e){if(e.monitoring){var t=g(e);h.stopMonitoringForRegion(t).fail(console.error).done(),e.monitoring=!1}})}function d(){angular.forEach($,function(e){if(e.ranging){var t=g(e);h.stopRangingBeaconsInRegion(t).fail(console.error).done()}e.ranging=!1})}function u(){c(),d()}function p(){m(),f()}function m(){angular.forEach(b,function(e){if(!e.monitoring){var t=g(e);h.startMonitoringForRegion(t).fail(console.error).done(),e.monitoring=!0}})}function f(){angular.forEach($,function(e){if(!e.ranging){var t=g(e);h.startRangingBeaconsInRegion(t).fail(console.error).done()}e.ranging=!0})}function g(e){var t=null;return angular.forEach(w,function(n){return n.uuid.toLowerCase()==e.uuid.toLowerCase()?void(t=n):void 0}),null===t&&(t=new h.BeaconRegion(e.name,e.uuid,e.major,e.minor),w.push(t)),t}var v={init:a,addBeacon:l,stopMonitoring:c,stopRanging:d,startMonitoring:m,startRanging:f,startListening:p,stopListening:u},h=!1,y=null,b=[],$=[],w=[],S=[],k=!1;return v}]),angular.module("app.core").factory("GeofenceFactory",["$q","$injector","Plugin","StoreFactory","$log",function(e,t,n,a,o){function i(e){return"string"==typeof e.name&&"number"==typeof e.lat&&"number"==typeof e.lng&&"number"==typeof e.radius}function r(o,i){if(N)return e.when();F=o,P=i,_=C===!0?x():n.getSource("geofence");var r=e.defer();return _===!1?r.reject():(M=t.get("ActionFactory"),A("Retrieving saved geofence state:",a.get(T)),A('Initializing "geofence" plugin...'),_.initialize().then(function(){d(r)},function(e){u(e)})),N=!0,r.promise}function s(t){if(!q){R.push(t);var n="Plugin not ready, adding geofence to queue:";return A(n,t),e.reject(n)}var a=y(t,"enter")?I:0,o=y(t,"exit")?D:0,i=a|o,r=[I,D,I|D];if(-1==r.indexOf(i)){var s='Geofence "'+t.name+'" being ignored - has no transition actions defined';return A(s),e.reject(s)}var l=e.defer();if(t.fullyQualifiedName=h(t.name),void 0===t.listening){var c=k(t);t.listening=void 0!==c?c.listening:!0}if(t.listening===!1)A('Skipping geofence "'+t.name+'", was previously stopped'),w(t);else if(t.listening===!0){var d={id:t.fullyQualifiedName,latitude:t.lat,longitude:t.lng,radius:t.radius,transitionType:i,notification:{id:1,title:F,text:t.notificationText||"You have passed a geofence boundary",openAppOnClick:!0}};_.addOrUpdate(d).then(function(){A('Registered geofence "'+t.name+'"'),w(t),l.resolve()},function(e){var n='Unable to register geofence "'+t.name+'"';E(n,e),l.reject(n)})}return l.promise}function l(t){if(!q)return e.reject("Geofence plugin not initialised");if("|all|"===t)return g();var n=e.defer(),a=h(t),o=$(a);return null!==o?o.listening===!1?(o.listening=!0,s(o).then(function(){S(),n.resolve()})):(A('Geofence "'+t+'" already registered'),n.resolve()):n.reject('Unable to find and start geofence "'+t+'"'),n.promise}function c(t){if(!q)return e.reject("Geofence plugin not initialised");if("|all|"===t)return v();var n=e.defer(),a=h(t),o=$(a);return null!==o?_.remove(o.fullyQualifiedName).then(function(){A('Geofence "'+t+'" stopped'),o.listening=!1,w(o),S(),n.resolve()},function(e){var a='Unable to stop geofence "'+t+'"';e(a,e),n.reject(a)}):n.reject('Unable to find and stop geofence "'+t+'"'),n.promise}function d(e){q=!0,_.onTransitionReceived=p,A('Initialized "geofence" plugin'),_.removeAll().then(function(){A("Existing geofence registrations purged"),R.length>0&&(A("Registering "+R.length+" queued geofences..."),angular.forEach(R,function(e){s(e)}),R=[]),e.resolve()})}function u(e){e("Geofence plugin not initialised",e)}function p(e){angular.forEach(e,function(e){var t=$(e.id);if(null!==t&&t.listening===!0)switch(e.transitionType){case I:m(t);break;case D:f(t)}})}function m(e){null!==e&&e.listening===!0&&e.actions.length&&(A('Triggering "enter" event for "'+e.name+'"'),M.triggerEvent("enter",e.actions))}function f(e){null!==e&&e.listening===!0&&e.actions.length&&(A('Triggering "exit" event for "'+e.name+'"'),M.triggerEvent("exit",e.actions))}function g(){var t=e.defer(),n=[];return angular.forEach(L,function(e){e.listening=!0,n.push(s(e))}),e.all(n).then(function(){A("All geofences registered"),S(),t.resolve()}),t.promise}function v(){var t=e.defer();return _.removeAll().then(function(){A("All geofences stopped"),angular.forEach(L,function(e){e.listening=!1,w(e)}),S(),t.resolve()},function(e){var n="Unable to stop all geofences";e(n,e),t.reject(n)}),t.promise}function h(e){return P+"__"+e}function y(e,t){return e.actions&&e.actions.length?e.actions.some(function(e){return e.event.toLowerCase()===t.toLowerCase()}):!1}function b(e){for(var t=0;t<L.length;t++){var n=L[t];if(n.fullyQualifiedName===e)return t}return-1}function $(e){var t=b(e);return-1!==t?L[t]:null}function w(e){var t=b(e.fullyQualifiedName);-1===t?L.push(e):L[t]=e}function S(){var e={};angular.forEach(L,function(t){e[t.name]={listening:t.listening}}),a.set(T,e),A("Geofence state saved:",e)}function k(e){return angular.copy(a.get(T+"."+e.name))}function A(){var e=Array.prototype.slice.call(arguments);e.length>0&&"string"==typeof e[0]&&(e[0]="[geofence.fct.js] "+e[0]),o.debug.apply(o,e)}function E(){var e=Array.prototype.slice.call(arguments);e.length>0&&"string"==typeof e[0]&&(e[0]="[geofence.fct.js] "+e[0]),o.error.apply(o,e)}function x(){function t(){var t=e.defer();return setTimeout(function(){t.resolve()},n),t.promise}o.info("*** USING MOCK GEOFENCE PLUGIN: Turn this off in geofence.fct.js if you expect to use the real plugin ***");var n=500;return{initialize:function(){return t()},addOrUpdate:function(){return t()},remove:function(){return t()},removeAll:function(){return t()},onTransitionReceived:function(){}}}var C=!1,T="data__.geofences",I=1,D=2,_=null,F="",P="",N=!1,M=null,q=!1,R=[],L=[];return{isValidGeofenceObject:i,init:r,register:s,start:l,stop:c}}]),angular.module("app.core").factory("AudioRecording",["$q","$rootScope","$log","FileSystem","Plugin",function(e,t,n,a,o){function i(e){var t=b.instances[e];return void 0===t&&(t={state:b.states.IDLE,media:null,recordPath:"",name:e,isInitialisingMedia:!1},b.instances[e]=t),t}function r(t){var o=b.getInstance(t),i=e.defer(),r=new Date,l=r.getTime();return o.fileName=l+".m4a",a.getStorageLocation().then(function(e){0===e.indexOf("file://")&&(e=e.replace("file://","")),o.recordPath=e+o.fileName,s(t,!0),i.resolve()})["catch"](function(e){n.error(e)}),i.promise}function s(e,t){var a=b.getInstance(e);void 0!==a.media&&null!==a.media&&(a.media.release(),a.media=null);var i=o.getSource("Media");a.media=new i(a.recordPath,function(){},function(e){n.error("Audio Error: ",e)},function(e){a.isInitialisingMedia&&e==i.MEDIA_RUNNING&&a.state==b.states.PLAYING_AUDIO?(p(a.name),a.isInitialisingMedia=!1):e==i.MEDIA_STOPPED?a.state=b.states.IDLE:e==i.MEDIA_NONE&&(a.state=b.states.IDLE)}),a.state=b.states.IDLE,t||(a.isInitialisingMedia=!0,u(a.name))}function l(t){var n=e.defer();return r(t).then(function(){var e=b.getInstance(t);e.media.startRecord(),e.state=b.states.RECORDING_AUDIO,n.resolve()})["catch"](function(e){n.reject(e)}),n.promise}function c(t){var n=e.defer();return r(t).then(function(){var e=b.getInstance(t),a={SampleRate:44100,NumberOfChannels:1};e.media.startRecordWithCompression(a),e.state=b.states.RECORDING_AUDIO,n.resolve()})["catch"](function(e){n.reject(e)}),n.promise}function d(t){var n=e.defer(),a=b.getInstance(t);return a.state!==b.states.RECORDING_AUDIO||void 0===a?n.reject("couldn't stop recording"):(a.media.stopRecord(),a.state=b.states.IDLE,a.media.release(),a.media=null,n.resolve(a.recordPath)),n.promise}function u(e){var t=b.getInstance(e);if(t.state!==b.states.IDLE&&t.state!==b.states.PAUSED_AUDIO||void 0===t)throw"couldn't start playing";null!==t.media&&(t.state=b.states.PLAYING_AUDIO,t.media.play())}function p(e){var t=b.getInstance(e);if(t.state!==b.states.PLAYING_AUDIO&&t.state!==b.states.PAUSED_AUDIO||void 0===t)throw"couldn't stop playing";null!==t.media&&(t.state=b.states.IDLE,t.media.stop())}function m(e){var t=b.getInstance(e);if(t.state!==b.states.PLAYING_AUDIO||void 0===t)throw"couldn't pause playing";null!==t.media&&(t.media.pause(),t.state=b.states.PAUSED_AUDIO)}function f(e,t){var n=b.getInstance(e);n.recordPath=t,s(e)}function g(e){return b.getInstance(e).state}function v(e){var t=b.getInstance(e);return t.media.getDuration()}function h(e,t,n){var a=b.getInstance(e);a.media.getCurrentPosition(t,n)}function y(e,t){var n=b.getInstance(e);n.media.seekTo(t)}var b={recordAudio:l,recordAudioWithCompression:c,stopRecordAudio:d,playAudio:u,stopPlayAudio:p,pausePlayAudio:m,setSource:f,getCurrentPosition:h,getDuration:v,seekTo:y,getInstance:i,getState:g};return b.states={IDLE:0,RECORDING_AUDIO:1,PLAYING_AUDIO:2,PAUSED_AUDIO:3},b.deviceType="Windows Phone 8.1"==navigator.userAgent.match(/Windows Phone 8\.1/i)?"wp8":"iPad"==navigator.userAgent.match(/iPad/i)?"ios":"iPhone"==navigator.userAgent.match(/iPhone/i)?"ios":"Android"==navigator.userAgent.match(/Android/i)?"android":"other",b.instances=[],b}]),angular.module("app.core").factory("Xmpp",["LoadingStatus","$log","StoreFactory","$injector","$rootScope","$q","Camera","Plugin","FileSystem","$sce",function(e,t,n,a,o,i,r,s,l,c){function d(e,r,d,u,p){var m=a.get("ActionFactory"),f=this;f.id=e,f.endpoint=r,f.uploadJid=u,f.readReceipts=p,f.actions=d,void 0!==f.id&&void 0!==f.endpoint?(f.cleanQueue(),f.connection=new Strophe.Connection(f.endpoint),f.setStatus(null),f.onMessage=function(e){t.debug("[xmpp.fct.js] ("+f.id+") MESSAGE RECEIVED:",e);try{var a=e.getAttribute("type"),i=e.getAttribute("id"),r=f.getBareJid(e.getAttribute("to")),d=f.getBareJid(e.getAttribute("from"));switch(a){case"chat":var u=e.getElementsByTagName("body")[0];if(void 0!==u)var p=Strophe.getText(u);var g=e.getElementsByTagName("metadata")[0];if(void 0!==g){var v={},h=g.childNodes;if(void 0!==h&&h.length>0)for(var y=0;y<h.length;y++){var b=h[y];v[b.tagName]=Strophe.getText(b)}}var $=f.createMessageObject(r,d,p,null,i,null,v),w=e.getElementsByTagName("markable")[0];void 0!==w&&f.readReceipts!==!1&&f.sendMarker($.id,f.MESSAGE_STATUS.RECEIVED);var S=e.getElementsByTagName("url")[0];if(void 0!==S){$.media.remote=encodeURI(Strophe.getText(S)),$.media.status=f.MEDIA_STATUS.DOWNLOADING,f.saveAndUpdate();var k=s.getSource("FileTransfer"),A=s.getSource("FileUploadOptions");void 0!==k&&void 0!==A&&l.getStorage().then(function(e){var n=new k,a=e.nativeURL+l.getFileNameFromPath($.media.remote);n.download($.media.remote,a,function(e){e.file(function(e){$.media.local=c.trustAsResourceUrl(e.localURL),$.media.type=l.getFileTypeFromPath(e.localURL),$.media.status=f.MEDIA_STATUS.DOWNLOADED,f.saveAndUpdate()},function(e){t.error("FILE ERROR:",e)})},function(e){t.error("DOWNLOAD ERROR:",e)})})}void 0!==f.actions&&f.actions.length>0&&m.triggerEvent("message-received",f.actions,{$message:$}),f.saveAndUpdate();break;case"error":var E=e.getAttribute("id");if(void 0!==E){var $=f.getMessageFromHistory(d,E);null!==$&&($.sent=!1,m.triggerEvent("error",f.actions,{$message:$}),n.save(),o.$emit("StoreHasChanged"))}break;default:var x=e.getElementsByTagName("received")[0];if(void 0!==x&&f.readReceipts!==!1){var C=x.getAttribute("id");if(null!==C){var T=f.getMessageFromHistory(d,C);T.status=f.MESSAGE_STATUS.RECEIVED,f.saveAndUpdate()}}var I=e.getElementsByTagName("displayed")[0];if(void 0!==I&&f.readReceipts!==!1){var C=I.getAttribute("id");if(null!==C){var T=f.getMessageFromHistory(d,C);T.status=f.MESSAGE_STATUS.DISPLAYED,f.saveAndUpdate()}}}}catch(D){t.error("XMPP Error:",D)}return!0},f.updateMessageStatus=function(e){var t=!1;f.queue.forEach(function(n){if(n===e){var a=f.getMessageFromAllHistory(e);null!==a&&(a.status=f.MESSAGE_STATUS.FAILED,m.triggerEvent("send-failed",f.actions,{$message:a}),t=!0)}}),t===!0&&f.saveAndUpdate()},f.send=function(e){var t=i.defer();if(f.connection.connected===!0){var n=null;if(n=void 0!==e.id?f.getMessageFromAllHistory(e.id):f.createMessageObject(e.to,f.connection.authzid,e.message,null,null,e.ttl,e.metadata),null!==n){var a=function(){var e=f.createMessageXml(n.id);f.queue.push(n.id),f.connection.send(e),f.saveAndUpdate(),t.resolve()},o=e["file-path"];if(void 0!==o&&angular.isString(o)&&o.length>0)if(void 0!==f.uploadJid){var r=s.getSource("FileTransfer"),d=s.getSource("FileUploadOptions");if(void 0!==r&&void 0!==d){var u=l.getFileNameFromPath(o);l.getFile(u).then(function(e){e.file(function(e){n.media.local=c.trustAsResourceUrl(e.localURL),n.media.type=l.getFileTypeFromPath(e.localURL),n.media.status=f.MEDIA_STATUS.UPLOADING,f.saveAndUpdate(),f.connection.httpFileUpload.slot(f.uploadJid,e.name,e.size,e.type,function(o){if(null!==o.put){var i=new d;i.httpMethod="PUT",i.file=e.name,i.headers={"Content-Type":e.type};var s=new r;s.upload(e.localURL,encodeURI(o.put),function(){n.media.remote=o.get,n.media.status=f.MEDIA_STATUS.UPLOADED,a()},function(e){t.reject(e)},i,!0)}else t.reject("No upload slot was provided.")},function(e){t.reject(e)})})})["catch"](function(e){t.reject(e)})}else t.reject("Media uploads unsupported on this platform.")}else t.reject("Upload jid has not been configured.");else a()}else t.reject("Unable to send message.")}else t.reject("No connection available.");return t.promise},f.markRead=function(e){var n=i.defer();if(f.connection.connected===!0)if(void 0!==e.id)t.debug("Marking message with ID '"+e.id+"' as displayed."),f.sendMarker(e.id,"displayed"),n.resolve(!0);else if(void 0!==e.recipient)if(void 0!==mdm.store.data__.xmpp[f.id].history&&void 0!==mdm.store.data__.xmpp[f.id].history[e.recipient]){var a=angular.copy(mdm.store.data__.xmpp[f.id].history[e.recipient].messages);void 0!==a&&a.length>0?(a=a.reverse(),a.every(function(e){return e.status===f.MESSAGE_STATUS.DISPLAYED||e.status===f.MESSAGE_STATUS.ACKNOWLEDGED?!1:(e.from!==f.connection.authzid&&void 0!==e.id&&f.sendMarker(e.id,f.MESSAGE_STATUS.DISPLAYED),!0)}),n.resolve(!0)):n.resolve(!0)}else n.resolve(!0);else n.reject("No message ID provided.");else n.reject("No connection available.");return n.promise},f.onAcknowledgement=function(e){t.debug("[xmpp.fct.js] ("+f.id+") ACKNOWLEDGEMENT RECEIVED:",e);try{var n=!1;f.queue.forEach(function(e){var t=f.getMessageFromAllHistory(e);null!==t&&-1===[f.MESSAGE_STATUS.RECEIVED,f.MESSAGE_STATUS.ACKNOWLEDGED,f.MESSAGE_STATUS.DISPLAYED].indexOf(t.status)&&(t.status=f.MESSAGE_STATUS.SENT,n=!0)}),f.queue=[],n===!0&&f.saveAndUpdate()}catch(a){t.error(a)}return!0},f.onIq=function(e){t.debug("[xmpp.fct.js] ("+f.id+") IQ RECEIVED:",e);var a=e.getAttribute("type");switch(a){case"set":var o=e.getElementsByTagName("list")[0];if(void 0!==o){var i=o.getAttribute("name");i==f.PRIVACY_LISTS.dnd&&f.getPrivacyList(f.PRIVACY_LISTS.dnd,function(e){var t=e.getElementsByTagName("item")[0];if(void 0!==t){var a=t.getAttribute("action");n.set("data__.xmpp."+f.id+"."+f.PRIVACY_LISTS.dnd,"deny"==a)}})}}return!0},f.login=function(e,n){var a=i.defer();return void 0!==e&&void 0!==n?f.connection.connect(e,n,function(e){var n=f.statusCodeToTxt(e);switch(f.setStatus(n),m.triggerEvent(n,f.actions),t.debug("[xmpp.fct.js] ("+f.id+") STATUS CHANGE:",n),n){case f.CONNECTION_STATUS.CONNFAIL:case f.CONNECTION_STATUS.DISCONNECTED:case f.CONNECTION_STATUS.ERROR:f.purgeQue(),a.reject("Connection error.");break;case f.CONNECTION_STATUS.CONNECTED:m.triggerEvent("connected",f.actions),f.connection.addHandler(f.onMessage,null,"message",null,null,null),f.connection.addHandler(f.onIq,null,"iq",null,null,null),f.connection.addHandler(f.onAcknowledgement,null,"a",null,null,null),f.connection.send($pres().tree()),f.connection.streamManagement.enable(),f.connection.streamManagement.requestResponseInterval=1,setTimeout(function(){f.createPrivacyLists().then(function(){a.resolve()})},100)}return!0}):a.reject("XMPP username and password must be provided."),a.promise},f.logout=function(){f.connection.disconnect()},f.toggleDoNotDisturb=function(e){var t=i.defer(),a=n.get("data__.xmpp."+f.id+"."+f.PRIVACY_LISTS.dnd);if(e!==a){var o=e===!0?"deny":"allow";if(f.connection.connected===!0){var r=$iq({from:f.connection.jid,type:"set",id:f.connection.getUniqueId()}).c("query",{xmlns:"jabber:iq:privacy"}).c("list",{name:f.PRIVACY_LISTS.dnd}).c("item",{type:"jid",value:f.connection.domain,action:o,order:"1"});f.connection.sendIQ(r,function(){n.set("data__.xmpp."+f.id+"."+f.PRIVACY_LISTS.dnd,e)}),t.resolve(!0)}else t.reject("Not connected to XMPP server.")}else t.resolve(!0);return t.promise}):t.error("Missing data for XMPP instance.")}return d.prototype.queue=[],d.prototype.MESSAGE_STATUS={SENDING:"sending",SENT:"sent",FAILED:"failed",RECEIVED:"received",DISPLAYED:"displayed",ACKNOWLEDGED:"acknowledged"},d.prototype.MEDIA_STATUS={DOWNLOADING:"downloading",DOWNLOADED:"downloaded",FAILED:"failed",UPLOADING:"uploading",UPLOADED:"uploaded"},d.prototype.CONNECTION_STATUS={ERROR:"error",CONNECTING:"connecting",CONNFAIL:"connection-failed",AUTHENTICATING:"authenticating",AUTHFAIL:"authentication-failed",CONNECTED:"connected",DISCONNECTED:"disconnected",DISCONNECTING:"disconnecting",ATTACHED:"attached"},d.prototype.PRIVACY_LISTS={dnd:"do_not_disturb"},d.prototype.createPrivacyLists=function(){var e=i.defer(),t=this,a=$iq({from:this.connection.jid,type:"get"}).c("query",{xmlns:"jabber:iq:privacy"});return t.connection.sendIQ(a,function(a){for(var o=a.getElementsByTagName("list"),i=a.getElementsByTagName("default")[0],r=!1,s=0;s<o.length;s++){var l=o[s],c=l.getAttribute("name");c==t.PRIVACY_LISTS.dnd&&(r=!0,t.getPrivacyList(t.PRIVACY_LISTS.dnd,function(e){var a=e.getElementsByTagName("item")[0];if(void 0!==a){var o=a.getAttribute("action");n.set("data__.xmpp."+t.id+"."+t.PRIVACY_LISTS.dnd,"deny"==o)}}))}var d=function(e){var n=$iq({from:t.connection.jid,type:"set",id:t.connection.getUniqueId()}).c("query",{xmlns:"jabber:iq:privacy"}).c("default",{name:t.PRIVACY_LISTS.dnd});t.connection.sendIQ(n,function(){e()})};if(r===!1){var u=n.get("data__.xmpp."+t.id+"."+t.PRIVACY_LISTS.dnd),p=1==u?"deny":"allow",m=$iq({from:t.connection.jid,type:"set",id:t.connection.getUniqueId()}).c("query",{xmlns:"jabber:iq:privacy"}).c("list",{name:t.PRIVACY_LISTS.dnd}).c("item",{type:"jid",value:t.connection.domain,action:p,order:"1"});t.connection.sendIQ(m,function(){d(function(){e.resolve(!0)})})}else void 0===i?d(function(){e.resolve(!0)}):e.resolve(!0)}),e.promise},d.prototype.getPrivacyList=function(e,t){var n=this,a=$iq({from:n.connection.jid,type:"get",id:n.connection.getUniqueId()}).c("query",{xmlns:"jabber:iq:privacy"}).c("list",{name:e});n.connection.sendIQ(a,t)},d.prototype.setStatus=function(e){n.set("data__.xmpp."+this.id+".status",e)},d.prototype.statusCodeToTxt=function(e){var t=null;switch(e){case Strophe.Status.ERROR:t=this.CONNECTION_STATUS.ERROR;break;case Strophe.Status.CONNECTING:t=this.CONNECTION_STATUS.CONNECTING;break;case Strophe.Status.CONNFAIL:t=this.CONNECTION_STATUS.CONNFAIL;break;case Strophe.Status.AUTHENTICATING:t=this.CONNECTION_STATUS.AUTHENTICATING;break;case Strophe.Status.AUTHFAIL:t=this.CONNECTION_STATUS.AUTHFAIL;break;case Strophe.Status.CONNECTED:t=this.CONNECTION_STATUS.CONNECTED;break;case Strophe.Status.DISCONNECTED:t=this.CONNECTION_STATUS.DISCONNECTED;break;case Strophe.Status.DISCONNECTING:t=this.CONNECTION_STATUS.DISCONNECTING;break;case Strophe.Status.ATTACHED:t=this.CONNECTION_STATUS.ATTACHED}return t},d.prototype.createMessageXml=function(e){var t=this.getMessageFromAllHistory(e),n=$msg({to:t.to,from:t.from,id:e,type:"chat"});if(void 0!==t.body&&n.c("body",null,t.body),null!==t.media.remote&&(n.c("x",{xmlns:"jabber:x:oob"}),n.c("url",null,t.media.remote)),this.readReceipts!==!1&&n.c("markable",{xmlns:"urn:xmpp:chat-markers:0"}),null!==t.ttl&&(this.readReceipts!==!1&&n.up(),n.c("x",{xmlns:"jabber:x:expire",seconds:t.ttl})),null!==t.metadata&&Object.keys(t.metadata).length>0){(null!==t.ttl||this.readReceipts!==!1)&&n.up(),n.c("metadata",{xmlns:"urn:commontime:mdesign:metadata"});for(var a in t.metadata)void 0!==t.metadata[a]&&n.c(a,null,t.metadata[a])}return n.tree()},d.prototype.sendMarker=function(e,t){var n=this.getMessageFromAllHistory(e),a=$msg({to:n.from,from:n.to,id:this.connection.getUniqueId(),type:"marker"});a.c(t,{xmlns:"urn:xmpp:chat-markers:0",id:e}),n.status=t,this.calcReadCount(n.from),this.connection.send(a.tree())},d.prototype.calcReadCount=function(e){var t=mdm.store.data__.xmpp[this.id].history[e].messages,n=0,a=0,o=this;t.forEach(function(t){t.from==e&&(t.status===o.MESSAGE_STATUS.DISPLAYED?n+=1:a+=1)}),mdm.store.data__.xmpp[this.id].history[e].read=n,mdm.store.data__.xmpp[this.id].history[e].unread=a,this.saveAndUpdate()},d.prototype.createMessageObject=function(e,n,a,o,i,r,s){var l=n===this.connection.authzid?e:n;if(void 0!==l){var c={id:void 0!==i&&null!==i?i:this.connection.getUniqueId(),from:n,ttl:void 0!==r?r:null,to:e,body:a,status:n===this.connection.authzid?this.MESSAGE_STATUS.SENDING:null,ts:(new Date).getTime(),media:{local:null,remote:null,status:null},metadata:void 0!==s&&null!==s?s:null};return void 0!==o&&null!==o&&(void 0!==o.local&&(c.media.local=o.local),void 0!==o.remote&&(c.media.remote=o.remote),void 0!==o.status&&(c.media.status=o.status)),this.addHistory(l,c),this.getMessageFromHistory(l,c.id)}return t.error("Recipient required for a message."),null},d.prototype.getMessageFromHistory=function(e,t){var n=null;if(void 0!==mdm.store.data__.xmpp[this.id].history[e]){var a=mdm.store.data__.xmpp[this.id].history[e].messages;void 0!==a&&a.length>0&&a.forEach(function(e){e.id==t&&(n=e)})}return n},d.prototype.getMessageFromAllHistory=function(e){var t=mdm.store.data__.xmpp[this.id].history,n=null;if(void 0!==t)for(var a in t)null===n&&(n=this.getMessageFromHistory(a,e));return n},d.prototype.addHistory=function(e,t){(void 0===mdm.store.data__.xmpp[this.id]||void 0===mdm.store.data__.xmpp[this.id].history)&&(mdm.store.data__.xmpp[this.id]={status:null,history:{}}),void 0===mdm.store.data__.xmpp[this.id].history[e]&&(mdm.store.data__.xmpp[this.id].history[e]={messages:[],read:0,unread:0}),t.ts=(new Date).getTime(),mdm.store.data__.xmpp[this.id].history[e].messages.push(t)},d.prototype.saveAndUpdate=function(){n.save(),o.$emit("StoreHasChanged")},d.prototype.purgeQue=function(){var e=!1,t=this;this.queue.forEach(function(n){var a=t.getMessageFromAllHistory(n);null!==a&&(a.status=t.MESSAGE_STATUS.FAILED,e=!0)}),e===!0&&this.saveAndUpdate()},d.prototype.cleanQueue=function(){if(void 0!==mdm.store.data__.xmpp[this.id]){var e=mdm.store.data__.xmpp[this.id].history,t=!1;if(void 0!==e){var n=this;for(var a in e){var o=e[a].messages;void 0!==o&&o.forEach(function(e){e.status===n.MESSAGE_STATUS.SENDING&&(e.status=n.MESSAGE_STATUS.FAILED,t=!0)})}}t===!0&&this.saveAndUpdate()}},d.prototype.getBareJid=function(e){var t=null;if(e.indexOf("/")>-1){var n=e.split("/");t=n[0]}return t},d}]),angular.module("app.core").factory("XmppFactory",["Xmpp","$q",function(e,t){function n(t){l[t.name]=new e(t.name,t.endpoint,t.actions,t["upload-jid"],t["read-receipts"])}function a(e){var n=t.defer(),a=e.name;return void 0!==a?void 0!==l[a]?l[a].send(e).then(function(){n.resolve(!0)})["catch"](function(e){n.reject(e)}):n.reject("XMPP instance with name '"+a+"' does not exist."):n.reject("XMPP instance name not specified."),n.promise}function o(e){var n=t.defer(),a=e.name;return void 0!==a?void 0!==l[a]?l[a].markRead(e).then(function(){n.resolve(!0)})["catch"](function(e){n.reject(e)}):n.reject("XMPP instance with name '"+a+"' does not exist."):n.reject("XMPP instance name not specified."),n.promise}function i(e,n){var a=t.defer(),o=e.name;return void 0!==o?void 0!==l[o]?l[o].toggleDoNotDisturb(n).then(function(){a.resolve(!0)})["catch"](function(e){a.reject(e)}):a.reject("XMPP instance with name '"+o+"' does not exist."):a.reject("XMPP instance name not specified."),a.promise}function r(e){var n=t.defer(),a=e.name;return void 0!==a?void 0!==l[a]?l[a].login(e.username,e.password).then(function(){n.resolve()})["catch"](function(e){n.reject(e)}):n.reject("XMPP instance with name '"+a+"' does not exist."):n.reject("XMPP instance name not specified."),n.promise}function s(e){var n=t.defer(),a=e.name;return void 0!==a?void 0!==l[a]?(l[a].logout(),n.resolve()):n.reject("XMPP instance with name '"+a+"' does not exist."):n.reject("XMPP instance name not specified."),n.promise}var l={},c={init:n,send:a,login:r,logout:s,markRead:o,toggleDoNotDisturb:i};return c}]),angular.module("app.core").factory("FileSystem",["Plugin","$q","Platform","electron",function(e,t,n,a){function o(){var o=t.defer();if(void 0!==a.app)o.resolve(a.fsplus.getAppDataDirectory()+a.path.sep+"mDesign10"+a.path.sep);else if("winphone"==n.getName())o.resolve("local\\");else{var i=e.getSource("file");i!==!1?"ios"==n.getName()?o.resolve(i.documentsDirectory):"android"==n.getName()?o.resolve(i.externalDataDirectory):o.resolve(i.dataDirectory):o.reject("File System unavailable on this platform."+navigator.userAgent)}return o.promise}function i(){var e=t.defer();return o().then(function(t){void 0!==window.resolveLocalFileSystemURL?window.resolveLocalFileSystemURL(t,function(t){
e.resolve(t)},function(t){e.reject(t)}):e.reject("Local file system unavailable on this platform.")})["catch"](function(t){e.reject(t)}),e.promise}function r(e){var n=t.defer();return o().then(function(t){void 0!==window.resolveLocalFileSystemURL?window.resolveLocalFileSystemURL(t+e,function(e){n.resolve(e)},function(e){n.reject(e)}):n.reject("Local file system unavailable on this platform.")})["catch"](function(e){n.reject(e)}),n.promise}function s(e){var t=null,n=e.split("/");return n.length>1&&(t=n[n.length-1]),t}function l(e){switch(e){case"image/jpg":case"image/jpeg":case"image/gif":case"image/png":return d.IMAGE;case"audio/mp3":case"audio/mpeg":return d.AUDIO;default:return null}}function c(e){var t=null,n=e.split(".");if(n.length>1){var a=n[n.length-1];if(void 0!==a)switch(a){case"jpg":case"jpeg":t="image/jpg";break;case"png":t="image/png";break;case"mp3":t="audio/mp3";break;case"m4a":t="audio/mpeg"}}return t}var d={IMAGE:"image",AUDIO:"audio"},u={getStorageLocation:o,getFileTypeFromPath:c,getStorage:i,getFile:r,getFileNameFromPath:s,getMediaTypeFromMime:l,MEDIA_TYPES:d};return u}]),angular.module("app.core").factory("Platform",["StoreFactory",function(e){function t(){e.set("data__.env.platform.type",n()),e.set("data__.env.platform.name",a())}function n(){return/iPhone|iPad|iPod|IEMobile|Android/i.test(navigator.userAgent)?"device":/Electron/i.test(navigator.userAgent)?"desktop":/Chrome/i.test(navigator.userAgent)||/Firefox/i.test(navigator.userAgent)||i.test(navigator.userAgent)?"browser":null}function a(){return/IEMobile/i.test(navigator.userAgent)||/Windows Phone 8\.1/i.test(navigator.userAgent)?"winphone":/Android/i.test(navigator.userAgent)?"android":/iPhone|iPad|iPod/i.test(navigator.userAgent)?"ios":/Electron/i.test(navigator.userAgent)?"electron":/Chrome/i.test(navigator.userAgent)?"chrome":/Firefox/i.test(navigator.userAgent)?"firefox":i.test(navigator.userAgent)?"internet_explorer":null}var o={init:t,getType:n,getName:a},i=-1!=navigator.userAgent.indexOf("MSIE")?/MSIE (\d+\.\d+);/:/Trident.*rv[ :]*(\d+\.\d+)/;return o}]),angular.module("mobile-router",["LocalStorageModule"]),angular.module("mobile-router").provider("RouterConfig",function(){this.options={},this.set=function(e,t){switch(e){case"id":this.options.id=t;break;case"startPage":this.options.startPage=t;break;case"mode":switch(t){case"allin":case"intelligent":case"single":this.options[e]=t;break;default:console.log("Invalid Value: An invalid value for option 'mode' was specified.")}break;case"animation":switch(t){case"off":case"slide-in":case"slide-out":case"flip-in":case"fade-in":case"rotate-in-left":this.options[e]=t;break;default:console.log("Invalid Value: An invalid value for option 'animation' was specified.")}break;default:console.log("Invalid Option: An invalid option was specified.")}};var e=this;this.$get=function(){return{options:e.options,set:e.set}}}),angular.module("mobile-router").factory("RouteStack",["localStorageService",function(e){function t(t){l=t;var n=e.get(l+"_stack");null!=n&&(c=angular.fromJson(n))}function n(){return c[c.length-1]}function a(e){c=[n(),e];var t=n();void 0!==t&&(mdm.store.data__.state.currentPage=t.replace("/","")),r()}function o(){return c[0]}function i(e){var t=!1;angular.forEach(c,function(n,a){e==n&&(t=a)}),t!==!1&&(c.splice(t,1),r())}function r(){null!=l&&e.set(l+"_stack",c)}function s(){null!=l&&(c=[],e.remove(l+"_stack"))}var l=null,c=[],d={init:t,add:a,getPrevious:o,clear:s,remove:i,getCurrent:n};return d}]),angular.module("mobile-router").factory("Router",["RouterConfig","$templateCache","$log","$filter","RouteStack","$rootScope","$timeout","$q","$injector","$location","Auth",function(e,t,n,a,o,i,r,s,l,c,d){function u(e){return e.toString().replace(/\/$/,"").replace(/^\//,"")}function p(){return o.getPrevious(x.currentPath)}function m(e){for(var t=0;t<x.routes.length;t++)if(x.routes[t].path==e)return!0;return!1}function f(){return a("filter")(x.routes,{path:x.currentPath})[0]}function g(){if(void 0!==e.options.id){o.init(e.options.id);var t=o.getCurrent();if(void 0!==e.options.startPage)$(e.options.startPage);else if(void 0!==S(t))$(t);else{var a=x.routes[0];angular.forEach(x.routes,function(e){e.start===!0&&(a=e)}),void 0!=a?$(a.path):n.error("No first page available")}}}function v(e,a){if(void 0!=e)if(m(e)===!1){var o=u(e),i=a.templateUrl?a.templateUrl:o+".tpl.html";void 0!=a.template&&t.put(i,a.template),x.routes.push({path:e,id:o,templateUrl:i,possibilities:a.possibilities,actions:a.actions,start:a.start,auth:a.auth})}else n.error("Duplicate route names are not allowed.")}function h(){var e=window.location.href.match(/#(.*)$/);return null!==e?e[1]:void 0}function y(e){if(void 0!==e&&e.length>0){var t=l.get("ActionFactory");return t.triggerEvent("onload",e)}var n=s.defer();return n.resolve(),n.promise}function b(e){var t=s.defer();return e.auth===!0?d.authenticate().then(function(){t.resolve()})["catch"](function(e){t.reject(e)}):t.resolve(),t.promise}function $(e){e=e?e:"",i.back=o.getPrevious()==e;var t=S(e);void 0!==t&&b(t).then(function(){y(t.actions).then(function(){var t=h();void 0!==t&&t!=e?c.path(e):(x.currentPath=e,window.location.hash="#"+e,"/error"!=e&&o.add(e),A())})})["catch"](function(e){i.errorMessage=e,c.path("/error")})}function w(e){var t=void 0;return angular.forEach(x.routes,function(n){void 0===t&&n.id==e&&(t=n)}),t}function S(e){var t=void 0;return angular.forEach(x.routes,function(n){void 0===t&&n.path==e&&(t=n)}),t}function k(e){var t=!1;return angular.forEach(x.views,function(n){n.path==e&&(t=!0)}),t}function A(){var t=f();if(void 0!=t)switch(e.options.mode){case"allin":angular.forEach(x.routes,function(e){k(e.path)===!1&&x.views.push(e)}),r(function(){x.animate=!0},1500);break;case"single":x.views=[t],r(function(){x.animate=!0},1500);break;case"intelligent":default:k(t.path)===!1&&x.views.push(t),r(function(){angular.forEach(t.possibilities,function(e){var t=w(e);void 0!=t&&k(t.path)===!1&&x.views.push(t)})},500),r(function(){x.animate=!0},1500)}}function E(e){x.currentPath!=e&&(x.currentPath=e,"/error"!=e&&o.add(e),A())}var x={routes:[],views:[],animate:!1,currentPath:null,getCurrent:f,init:g,addRoute:v,go:$,lastRoute:p};return window.onhashchange=function(e){if(e.newURL!=e.oldURL){var t=h();void 0!=t&&""!=t&&(i.$$phase?E(t):i.$apply(function(){E(t)}))}},x}]),angular.module("mobile-router").directive("mobileView",["Router","RouterConfig","StoreFactory","localStorageService","$rootScope","LoadingStatus",function(e,t,n,a,o,i){return{restrict:"A",template:'<div class="preview-bar" ng-if="$root.cancelable"><a href="javascript:void(0)" ng-click="view.exit()"><span class="fa fa-arrow-circle-left"></span> BACK</a><a href="javascript:void(0)" ng-click="view.toggle()" class="drop-menu"><span class="fa fa-ellipsis-h"></span></a></div><nav class="drop-menu-nav" ng-show="view.open && $root.cancelable"><a href="javascript:void(0)" ng-click="view.reset()"><span class="fa fa-trash"></span> Reset</a></nav><div class="app-container" ng-class="{\'loading\': (view.load.loading), \'cancelable\': ($root.cancelable)}"><div class="loader-container alert alert-primary"><span class="icon icon-spinner5 icon-spin"></span> {{view.load.message}}</div><div ng-repeat="route in view.router.views" id="{{route.id}}" page-info ng-controller="PageController as page" class="page-container {{view.config.options.animation}}" ng-class="{\'current\': (view.router.currentPath == route.path), \'animate\': (view.router.animate == true)}"><div class="flexbox-container" ng-form name="pageForm" md-form ng-include="route.templateUrl"></div></div></div>',controller:function(){var r=this;r.router=e,r.config=t,r.load=i,r.exit=function(){if(o.cancelable){var e=null!==a.get("cancelUrl")?a.get("cancelUrl"):a.get("backUrl");null!==e&&(n.set("data__.env.exit","cancel"),window.location.href=e)}},r.open=!1,r.toggle=function(){r.open=!r.open},r.reset=function(){o.cancelable&&(n.destroy(),window.location.reload())}},controllerAs:"view"}}]),angular.module("mobile-router").directive("endOfRender",["Router",function(e){return{restrict:"E",link:function(t){console.log("END OF RENDER: ",t.route.id),e.rendered=!0}}}]),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/area/mdList/mdList.tpl.html",'\n<div class="md-list" id=\'{{name}}\' ng-init="listFilter = {}" ng-if="show">\n    <div class="top" ng-if="search">\n        <div class="input-group">\n            <span class="input-group-addon"><span class="fa fa-search"></span></span>\n            <input type="text" class="form-control" ng-model="listFilter.text">\n        </div>\n    </div>\n    <div class="scrollable">\n        <ul class="{{listClasses}}" ng-switch="model != undefined">\n            <li ng-switch-when="false" class="{{listItemClasses}}" ng-repeat="$item in content | filter:listFilter.text track by $index" ng-click="clickListItem($index)"><span compile-list-row item="$item" row-template="{{row}}"></span><div ng-if="edit" class="remove-icon" ng-click="remove($index)"><span class="icon icon-cross"></span></div></li>\n            <li ng-switch-when="true" class="{{listItemClasses}}" ng-repeat="$item in model | store:listFilter.text track by $index" ng-click="clickListItem($index)"><span compile-list-row item="$item" row-template="{{row}}"></span><div ng-if="edit" class="remove-icon" ng-click="remove($index)"><span class="icon icon-cross"></span></div></li>\n        </ul>\n    </div>\n</div>\n')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/imageViewer/imageViewer.tpl.html",'<div class="image-viewer-container" ng-class="{\'dynamic\': (multiple)}">\n    <div class="image-frame" ng-if="multiple" ng-repeat="fileURI in files track by $index" ng-switch="getFileType(fileURI)">\n        <img ng-switch-when="image" md-thumbnail="fileURI"  ng-click="open($index)"/>\n        <div ng-switch-when="audio" class="media-player text-center" ng-click="open($index)"><span class="fa fa-file-audio-o fa-3x"></span><br><br><span>{{getViewableFilePath(fileURI)}}</span></div>\n    </div>\n    <div class="image-frame no-data" ng-if="multiple && files.length === 0">\n        <span class="fa fa-picture-o"></span>\n        No sources have been added.\n    </div>\n    <img md-thumbnail="{{image}}" ng-if="!multiple" ng-click="open($index)"/>\n</div>')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/imageViewer/imageViewerDisplay.tpl.html",'<div class="image-viewer-display-container"><div class="image-frame"><img ng-src="{{src}}" /></div><div class="image-footer"><a href="javascript:void(0)" class="danger" ng-click="delete()"><span class="fa fa-trash"></span> Delete</a><a href="javascript:void(0)" class="warning"><span class="fa fa-camera"></span> Retake</a><a href="javascript:void(0)" ng-click="close()" class="primary"><span class="fa fa-close"></span> Close</a></div></div>')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/fields/md-barcode.tpl.html",'<div class="barcode-group"><div class="code-display" ng-if="displayValue !== false" ng-class="{\'placeholder\': (!inputModel)}">{{inputModel || \'--\'}}</div><button class="btn btn-primary btn-lg" type="button"><span class="fa" ng-class="{\'fa-barcode\': (codeType == \'bar\'), \'fa-qrcode\': (codeType == \'qr\')}"></span> Capture <span ng-if="codeType == \'bar\'">Barcode</span><span ng-if="codeType == \'qr\'">QR Code</span></button><input type="hidden" validation="{{validators}}" name="{{::name}}" id="{{::name}}" ng-model="inputModel" ng-required="required" class="form-control" placeholder="{{::placeholder}}"> </div>')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/fields/md-checkbox.tpl.html",'<div class="container md-checkbox-container">\n    <div class="checkbox-element" ng-class="{\'vertical\': ($parent.$parent.vertical == true)}" ng-repeat="option in options track by $index">\n        <div class="md-checkbox" ng-class="{\'no-label\': (!option.label), \'selected\': (model[option.id] == true)}" ng-click="makeSelection(option.id)">\n            <span class="fa" ng-class="getClasses(option)"></span>\n            <span>{{option.label}}</span>\n        </div>\n    </div>\n</div>\n<input type="hidden" name="{{name}}" validation="{{validators}}" ng-required="{{required}}" ng-model="model" />\n')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/fields/md-radio.tpl.html",'<div class="container md-checkbox-container">\n    <div class="checkbox-element" ng-repeat="option in options track by $index">\n        <div class="md-checkbox" ng-class="{\'no-label\': (!option.label), \'selected\': (model == option.value)}" ng-click="makeSelection(option.value)">\n            <span class="fa" ng-class="getClasses(option)"></span>\n            <span>{{option.label}}</span>\n        </div>\n    </div>\n</div>\n<input type="hidden" name="{{name}}" validation="{{validators}}" ng-required="{{required}}" ng-model="model" />\n')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/fields/record-audio.tpl.html",'<div ng-class="{ \'audio-recorder-small\': smallrecorder, \'audio-recorder\': !smallrecorder }">\n    <a class="record-button" ng-click="recordButton()" ng-class="{ \'record-active\': isRecording, \'record-populated\': (isPopulated && !multiple) }">\n        <span class="fa fa-stack fa-2x">\n            <i id="mic-background" class="fa fa-stack-2x" ng-class="multiple ? (isRecording ? \'fa-circle\' : \'fa-circle-thin\') : (isRecording || isPopulated ? \'fa-circle\' : \'fa-circle-thin\')"></i>\n            <i id="mic-foreground" class="fa fa-microphone fa-stack-1x"></i>\n        </span>\n    </a>\n    <div ng-if="!smallrecorder" class="current-time">\n        {{currentTime}}\n    </div>\n</div>')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/mediaPlayer/audioPlayer.tpl.html",'<audio class="audio-player-element" preload="auto">\n</audio>\n<div class="audio-player" ng-class="isPlaying ? \'play-active\' : \'play-idle\'">\n    <a class="play-button" ng-click="playButton()">\n        <span class="fa fa-stack fa-2x">\n            <i id="play-background" class="fa fa-stack-2x " ng-class="isPlaying ? \'fa-square\' : \'fa-circle\'"></i>\n            <i id="play-foreground" class="fa fa-stack-1x" ng-class="isPlaying ? (defaultPlayer ? \'fa-stop\' : \'fa-pause\') : \'fa-play\'"></i>\n        </span>\n    </a>\n    <span class="current-time">{{currentTime}}</span>\n    <div class="timeline">\n        <div class="filler"></div>\n    </div>\n    <span class="total-time">{{totalTime}}</span>\n</div>')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/mediaPlayer/mediaPlayer.tpl.html",'<div class="media-player-container" ng-class="{\'dynamic\': (model)}">\n    <div ng-if="itemType == \'audio\'">\n        <audio-player name="{{name}}_player" src="{{src | trusted}}">\n        </audio-player>\n    </div>\n    <div ng-if="itemType == \'video\'">\n        <video type="video/mp4" src="{{src | trusted}}" controls></video>\n    </div>\n</div>')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/fields/templates/barcode.tpl.html",'<take-barcode code-type="bar" ng-model="$parent.$parent.inputModel"></take-barcode>')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/fields/templates/checkbox.tpl.html",'<md-checkbox model="$parent.$parent.inputModel" name="name" required="required" options="options" icon-selected="{{iconSelected}}" validators="{{validators}}" icon-unselected="{{iconUnselected}}"></md-checkbox>\n')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/fields/templates/date.tpl.html",'<div ng-class="{\'input-group\': (leftIcon || rightIcon)}" >\n    <div class="input-group-addon" ng-if="leftIcon"><span class="fa {{::leftIcon}}"></span></div>\n    <input type="text" pick-a-date="inputModel" pick-a-date-options="options" placeholder="--" class="form-control" ng-disabled="disabled" />\n    <div class="input-group-addon" ng-if="rightIcon"><span class="fa {{::rightIcon}}"></span></div>\n</div>\n<input type="hidden" name="{{::name}}" validation="{{validators}}" ng-required="{{required}}" ng-model="inputModel" />')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/fields/templates/datetime.tpl.html",'\n<div class="row datetime-container">\n    <div class="col-xs-6">\n        <div class="input-group">\n            <div class="input-group-addon">\n                <span class="fa fa-calendar"></span>\n            </div>\n            <input type="text" validation="{{validators}}" pick-a-date date-value="$parent.$parent.inputModel" min="min" max="max" ng-model="dateModel" class="form-control" name="{{::name}}" id="{{::name}}" placeholder="{{::placeholder}}" ng-required="{{required}}" ng-disabled="disabled">\n        </div>\n    </div>\n    <div class="col-xs-6">\n        <div class="input-group">\n            <div class="input-group-addon">\n                <span class="fa fa-calendar"></span>\n            </div>\n            <input type="text" validation="{{validators}}" pick-a-time date-value="$parent.$parent.inputModel" tmin="tmin" tmax="tmax" ng-model="dateModel" class="form-control" name="{{::name}}" id="{{::name}}" placeholder="{{::placeholder}}" ng-required="{{required}}" ng-disabled="disabled">\n        </div>\n    </div>\n</div>\n\n')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/fields/templates/email.tpl.html",'<div ng-class="{\'input-group\': (leftIcon || rightIcon)}">\n    <div class="input-group-addon" ng-if="leftIcon"><span class="fa {{::leftIcon}}"></span></div>\n    <input type="email" md-actions="{{actions}}" valid-email validation="{{validators}}" class="form-control" id="{{::name}}" name="{{::name}}" placeholder="{{::placeholder}}" ng-required="{{required}}" ng-disabled="disabled" ng-model="$parent.$parent.inputModel">\n    <div class="input-group-addon" ng-if="rightIcon"><span class="fa {{::rightIcon}}"></span></div>\n</div>')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/fields/templates/number.tpl.html",'<div ng-class="{\'input-group\': (leftIcon || rightIcon)}">\n    <div class="input-group-addon" ng-if="leftIcon"><span class="fa {{::leftIcon}}"></span></div>\n    <input type="number" validation="{{validators}}" md-actions="{{actions}}" min="{{min}}" max="{{max}}" class="form-control" id="{{::name}}" name="{{::name}}" placeholder="{{::placeholder}}" ng-required="{{required}}" ng-disabled="disabled" ng-model="$parent.$parent.inputModel" number-format decimal-places="{{::decimals}}" />\n    <div class="input-group-addon" ng-if="rightIcon"><span class="fa {{::rightIcon}}"></span></div>\n</div>\n')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/fields/templates/password.tpl.html",'<div ng-class="{\'input-group\': (leftIcon || rightIcon)}">\n    <div class="input-group-addon" ng-if="leftIcon"><span class="fa {{::leftIcon}}"></span></div>\n    <input type="password" validation="{{validators}}" md-actions="{{actions}}" class="form-control" id="{{::name}}" name="{{::name}}" placeholder="{{::placeholder}}" ng-required="{{required}}" ng-disabled="disabled" ng-model="$parent.$parent.inputModel" />\n    <div class="input-group-addon" ng-if="rightIcon"><span class="fa {{::rightIcon}}"></span></div>\n</div>')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/fields/templates/photo.tpl.html",'<take-photo ng-model="$parent.$parent.inputModel" image-url="$parent.$parent.inputModel" quality="quality" source="source" destination="destination"></take-photo>')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/fields/templates/qrcode.tpl.html",'<take-barcode code-type="qr" ng-model="$parent.$parent.inputModel"></take-barcode>')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/fields/templates/radio.tpl.html",'<md-radio model="$parent.$parent.inputModel" name="name" required="required" options="options" icon-selected="{{iconSelected}}" validators="{{validators}}" icon-unselected="{{iconUnselected}}" actions="actions"></md-radio>\n')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/fields/templates/range-slider.tpl.html",'<md-range-slider name="name" model="$parent.$parent.inputModel" required="required" validators="{{validators}}" min="{{min}}" max="{{max}}" step="{{step}}"></md-range-slider>')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/fields/templates/rating.tpl.html",'<div class="star-rating" star-rating rating-value="$parent.$parent.inputModel" max="max || 5" on-rating-selected="inputModel = rating; updateInputValue(rating);"></div>\n<input type="hidden" actions="{{actions}}" validation="{{validators}}" ng-model="$parent.$parent.inputModel" name="{{::name}}" ng-required="{{required}}" />\n')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/fields/templates/recordAudio.tpl.html",'<record-audio name="{{name}}" model="{{key}}" label="{{label}}" small-player="smallplayer" expressions="expressions" actions="actions"></record-audio>')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/fields/templates/select.tpl.html",'<div ng-switch="searchable == true">\n    <select ng-switch-when="false" ng-change="$parent.$parent.$parent.userInput()" class="form-control" md-actions="{{actions}}" ng-class="{\'disabled\': disabled}" md-select validation="{{validators}}" id="{{::name}}" name="{{::name}}" ng-required="{{required}}" ng-disabled="disabled" ng-model="$parent.$parent.$parent.inputModel" ng-options="option.label group by option.group for option in $parent.options track by option.label">\n        <option value="">Please select...</option>\n    </select>\n    <div ng-switch-when="true">\n        <ol class="nya-bs-select" ng-model="$parent.$parent.$parent.inputModel" data-live-search="true" data-size="5" ng-disabled="disabled">\n            <li nya-bs-option="option in $parent.options group by option.group track by option.label">\n                <span class="dropdown-header" ng-if="$group">{{$group}}</span>\n                <a>{{option.label}}</a>\n            </li>\n        </ol>\n        <input type="hidden" ng-model="$parent.$parent.inputModel" md-actions="{{actions}}" validation="{{validators}}" name="{{::name}}" ng-required="{{required}}" />\n    </div>\n</div>')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/fields/templates/signature.tpl.html",'<input type="hidden" validation="{{validators}}" name="{{::name}}" ng-model="$parent.$parent.inputModel" ng-required="{{required}}" />\n<div class="signature-frame">\n    <div class="canvas-frame">\n        <canvas md-signature ng-model="$parent.$parent.inputModel"></canvas>\n        <div class="sign-line"></div>\n    </div>\n    <div class="controls">\n        <button class="btn btn-default" ng-click="$parent.$parent.inputModel = undefined;">Clear signature</button>\n    </div>\n</div>')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/fields/templates/slider.tpl.html",'<md-slider actions="actions" name="name" model="$parent.$parent.inputModel" required="required" validators="{{validators}}" min="{{min}}" max="{{max}}" step="{{step}}"></md-slider>')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/fields/templates/smiley.tpl.html",'\n<div class="smiley-container">\n    <a href="javascript:void(0)" class="smile" ng-class="{\'active\': ($parent.$parent.inputModel == true)}" ng-click="$parent.$parent.inputModel = true; $parent.$parent.updateStore(true)"><span class="icon icon-smile"></span></a>\n    <a href="javascript:void(0)" class="frown" ng-class="{\'active\': ($parent.$parent.inputModel == false)}" ng-click="$parent.$parent.inputModel = false; $parent.$parent.updateStore(false)"><span class="icon icon-sad"></span></a>\n</div>\n<input type="hidden" validation="{{validators}}" name="{{::name}}" ng-model="$parent.$parent.inputModel" ng-required="{{required}}" />\n')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/fields/templates/switch.tpl.html",'<div class="switch-container">\n    <!--<switch id="{{::name}}" name="{{::name}}" ng-model="$parent.$parent.inputModel" class="{{theme || \'green\'}}"></switch>-->\n\n    <span class="switch" ng-click="undefined ? $parent.$parent.inputModel : $parent.$parent.inputModel=!$parent.$parent.inputModel" ng-class="{ checked:$parent.$parent.inputModel, disabled:undefined }" id="item_606be037" name="item_606be037" ng-model="$parent.$parent.inputModel"><small></small><input type="checkbox" name="item_606be037" ng-model="$parent.$parent.inputModel" validation="{{validators}}" ng-required="{{required}}" style="display:none" class="ng-pristine ng-untouched ng-valid" ng-model-options="{debounce: { \'default\': 500, \'blur\': 0 }}"><span class="switch-text"><span class="on" ng-if="$parent.$parent.inputModel === true">{{onText}}</span><span class="off" ng-if="$parent.$parent.inputModel !== true">{{offText}}</span></span></span>\n\n\n    <!--<input type="hidden" validation="{{validators}}" name="{{::name}}" ng-model="$parent.$parent.inputModel" ng-required="{{required}}" />-->\n</div>')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/fields/templates/text.tpl.html",'<div ng-switch="multi">\n    <div ng-switch-when="false" ng-class="{\'input-group\': (leftIcon || rightIcon)}">\n        <div class="input-group-addon" ng-if="leftIcon"><span class="fa {{::leftIcon}}"></span></div>\n        <input type="text" validation="{{validators}}" md-actions="{{actions}}" class="form-control" id="{{::name}}" name="{{::name}}" placeholder="{{::placeholder}}" ng-required="{{required}}" ng-disabled="disabled" ng-model="$parent.$parent.$parent.inputModel" ng-model-options="{debounce: { \'default\': 0, \'blur\': 0 }}" />\n        <div class="input-group-addon" ng-if="rightIcon"><span class="fa {{::rightIcon}}"></span></div>\n    </div>\n\n    <textarea ng-switch-when="true" class="form-control" validation="{{validators}}" md-actions="{{actions}}" id="{{::name}}" name="{{::name}}" placeholder="{{::placeholder}}" ng-required="{{required}}" ng-disabled="disabled" ng-model="$parent.$parent.$parent.inputModel" rows="3" ng-model-options="{debounce: { \'default\': 0, \'blur\': 0 }}">{{default}}</textarea>\n</div>\n')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/fields/templates/thumbs.tpl.html",'\n<div class="thumbs-container">\n    <a href="javascript:void(0)" class="up" ng-class="{\'active\': ($parent.$parent.inputModel == true)}" ng-click="$parent.$parent.inputModel = true; $parent.$parent.updateStore(true)"><span class="icon icon-thumbs-up"></span></a>\n    <a href="javascript:void(0)" class="down" ng-class="{\'active\': ($parent.$parent.inputModel == false)}" ng-click="$parent.$parent.inputModel = false; $parent.$parent.updateStore(false)"><span class="icon icon-thumbs-down"></span></a>\n</div>\n<input type="hidden" validation="{{validators}}" name="{{::name}}" ng-model="$parent.$parent.inputModel" ng-required="{{required}}" />\n')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("components/mdDynamicForm/fields/templates/time.tpl.html",'<div ng-class="{\'input-group\': (leftIcon || rightIcon)}" id="{{::name}}">\n    <div class="input-group-addon" ng-if="leftIcon"><span class="fa {{::leftIcon}}"></span></div>\n    <input type="text" pick-a-time="$parent.$parent.inputModel" pick-a-time-options="options" placeholder="--" class="form-control" ng-disabled="disabled" />\n    <div class="input-group-addon" ng-if="rightIcon"><span class="fa {{::rightIcon}}"></span></div>\n</div>\n<input type="hidden" name="{{::name}}" validation="{{validators}}" ng-required="{{required}}" ng-model="$parent.$parent.inputModel" />')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("bower_components/angular-strap/src/aside/aside.tpl.html",'<div class="aside" tabindex="-1" role="dialog">\n  <div class="aside-dialog">\n    <div class="aside-content">\n      <div class="aside-header" ng-show="title">\n        <button type="button" class="close" ng-click="$hide()">&times;</button>\n        <h4 class="aside-title" ng-bind="title"></h4>\n      </div>\n      <div class="aside-body" ng-bind="content"></div>\n      <div class="aside-footer">\n        <button type="button" class="btn btn-default" ng-click="$hide()">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("bower_components/angular-strap/src/alert/alert.tpl.html",'<div class="alert" ng-class="[type ? \'alert-\' + type : null]">\n  <button type="button" class="close" ng-if="dismissable" ng-click="$hide()">&times;</button>\n  <strong ng-bind="title"></strong>&nbsp;<span ng-bind-html="content"></span>\n</div>\n')}])}(),function(e){
try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("bower_components/angular-strap/src/datepicker/datepicker.tpl.html",'<div class="dropdown-menu datepicker" ng-class="\'datepicker-mode-\' + $mode" style="max-width: 320px;">\n<table style="table-layout: fixed; height: 100%; width: 100%;">\n  <thead>\n    <tr class="text-center">\n      <th>\n        <button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$selectPane(-1)">\n          <i class="{{$iconLeft}}"></i>\n        </button>\n      </th>\n      <th colspan="{{ rows[0].length - 2 }}">\n        <button tabindex="-1" type="button" class="btn btn-default btn-block text-strong"  ng-click="$toggleMode()">\n          <strong style="text-transform: capitalize;" ng-bind="title"></strong>\n        </button>\n      </th>\n      <th>\n        <button tabindex="-1" type="button" class="btn btn-default pull-right" ng-click="$selectPane(+1)">\n          <i class="{{$iconRight}}"></i>\n        </button>\n      </th>\n    </tr>\n    <tr ng-show="showLabels" ng-bind-html="labels"></tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="(i, row) in rows" height="{{ 100 / rows.length }}%">\n      <td class="text-center" ng-repeat="(j, el) in row">\n        <button tabindex="-1" type="button" class="btn btn-default" style="width: 100%" ng-class="{\'btn-primary\': el.selected, \'btn-info btn-today\': el.isToday && !el.selected}" ng-click="$select(el.date)" ng-disabled="el.disabled">\n          <span ng-class="{\'text-muted\': el.muted}" ng-bind="el.label"></span>\n        </button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n</div>\n')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("bower_components/angular-strap/src/dropdown/dropdown.tpl.html",'<ul tabindex="-1" class="dropdown-menu" role="menu">\n  <li role="presentation" ng-class="{divider: item.divider}" ng-repeat="item in content" >\n    <a role="menuitem" tabindex="-1" ng-href="{{item.href}}" ng-if="!item.divider && item.href" target="{{item.target || \'\'}}" ng-bind="item.text"></a>\n    <a role="menuitem" tabindex="-1" href="javascript:void(0)" ng-if="!item.divider && item.click" ng-click="$eval(item.click);$hide()" ng-bind="item.text"></a>\n  </li>\n</ul>\n')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("bower_components/angular-strap/src/modal/modal.tpl.html",'<div class="modal" tabindex="-1" role="dialog">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header" ng-show="title">\n        <button type="button" class="close" ng-click="$hide()">&times;</button>\n        <h4 class="modal-title" ng-bind="title"></h4>\n      </div>\n      <div class="modal-body" ng-bind="content"></div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-default" ng-click="$hide()">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("bower_components/angular-strap/src/popover/popover.tpl.html",'<div class="popover">\n  <div class="arrow"></div>\n  <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n  <div class="popover-content" ng-bind="content"></div>\n</div>\n')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("bower_components/angular-strap/src/select/select.tpl.html",'<ul tabindex="-1" class="select dropdown-menu" ng-show="$isVisible()" role="select">\n  <li ng-if="$showAllNoneButtons">\n    <div class="btn-group" style="margin-bottom: 5px; margin-left: 5px">\n      <button class="btn btn-default btn-xs" ng-click="$selectAll()">All</button>\n      <button class="btn btn-default btn-xs" ng-click="$selectNone()">None</button>\n    </div>\n  </li>\n  <li role="presentation" ng-repeat="match in $matches" ng-class="{active: $isActive($index)}">\n    <a style="cursor: default;" role="menuitem" tabindex="-1" ng-click="$select($index, $event)">\n      <i class="{{$iconCheckmark}} pull-right" ng-if="$isMultiple && $isActive($index)"></i>\n      <span ng-bind="match.label"></span>\n    </a>\n  </li>\n</ul>\n')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("bower_components/angular-strap/src/tab/tab.tpl.html",'<ul class="nav" ng-class="$navClass" role="tablist">\n  <li ng-repeat="$pane in $panes track by $index" ng-class="$index == $panes.$active ? $activeClass : \'\'">\n    <a role="tab" data-toggle="tab" ng-click="$setActive($index)" data-index="{{ $index }}" ng-bind-html="$pane.title"></a>\n  </li>\n</ul>\n<div ng-transclude class="tab-content">\n</div>\n')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("bower_components/angular-strap/src/timepicker/timepicker.tpl.html",'<div class="dropdown-menu timepicker" style="min-width: 0px;width: auto;">\n<table height="100%">\n  <thead>\n    <tr class="text-center">\n      <th>\n        <button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(-1, 0)">\n          <i class="{{ $iconUp }}"></i>\n        </button>\n      </th>\n      <th>\n        &nbsp;\n      </th>\n      <th>\n        <button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(-1, 1)">\n          <i class="{{ $iconUp }}"></i>\n        </button>\n      </th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="(i, row) in rows">\n      <td class="text-center">\n        <button tabindex="-1" style="width: 100%" type="button" class="btn btn-default" ng-class="{\'btn-primary\': row[0].selected}" ng-click="$select(row[0].date, 0)" ng-disabled="row[0].disabled">\n          <span ng-class="{\'text-muted\': row[0].muted}" ng-bind="row[0].label"></span>\n        </button>\n      </td>\n      <td>\n        <span ng-bind="i == midIndex ? timeSeparator : \' \'"></span>\n      </td>\n      <td class="text-center">\n        <button tabindex="-1" ng-if="row[1].date" style="width: 100%" type="button" class="btn btn-default" ng-class="{\'btn-primary\': row[1].selected}" ng-click="$select(row[1].date, 1)" ng-disabled="row[1].disabled">\n          <span ng-class="{\'text-muted\': row[1].muted}" ng-bind="row[1].label"></span>\n        </button>\n      </td>\n      <td ng-if="showAM">\n        &nbsp;\n      </td>\n      <td ng-if="showAM">\n        <button tabindex="-1" ng-show="i == midIndex - !isAM * 1" style="width: 100%" type="button" ng-class="{\'btn-primary\': !!isAM}" class="btn btn-default" ng-click="$switchMeridian()" ng-disabled="el.disabled">AM</button>\n        <button tabindex="-1" ng-show="i == midIndex + 1 - !isAM * 1" style="width: 100%" type="button" ng-class="{\'btn-primary\': !isAM}" class="btn btn-default" ng-click="$switchMeridian()" ng-disabled="el.disabled">PM</button>\n      </td>\n    </tr>\n  </tbody>\n  <tfoot>\n    <tr class="text-center">\n      <th>\n        <button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(1, 0)">\n          <i class="{{ $iconDown }}"></i>\n        </button>\n      </th>\n      <th>\n        &nbsp;\n      </th>\n      <th>\n        <button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(1, 1)">\n          <i class="{{ $iconDown }}"></i>\n        </button>\n      </th>\n    </tr>\n  </tfoot>\n</table>\n</div>\n')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("bower_components/angular-strap/src/tooltip/tooltip.tpl.html",'<div class="tooltip in" ng-show="title">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="title"></div>\n</div>\n')}])}(),function(e){try{e=angular.module("app.templates")}catch(t){e=angular.module("app.templates",[])}e.run(["$templateCache",function(e){e.put("bower_components/angular-strap/src/typeahead/typeahead.tpl.html",'<ul tabindex="-1" class="typeahead dropdown-menu" ng-show="$isVisible()" role="select">\n  <li role="presentation" ng-repeat="match in $matches" ng-class="{active: $index == $activeIndex}">\n    <a role="menuitem" tabindex="-1" ng-click="$select($index, $event)" ng-bind="match.label"></a>\n  </li>\n</ul>\n')}])}();